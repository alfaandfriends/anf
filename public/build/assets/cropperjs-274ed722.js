import{c as Ba}from"./@inertiajs-72b4b122.js";var _a={exports:{}};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */(function(o,t){(function(r,e){o.exports=e()})(Ba,function(){function r(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);i&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(s,p).enumerable})),n.push.apply(n,a)}return n}function e(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?r(Object(n),!0).forEach(function(a){v(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}function f(s,i){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var a=n.call(s,i||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}function h(s){var i=f(s,"string");return typeof i=="symbol"?i:i+""}function l(s){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l(s)}function u(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")}function E(s,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,h(a.key),a)}}function y(s,i,n){return i&&E(s.prototype,i),n&&E(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function v(s,i,n){return i=h(i),i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function m(s){return D(s)||S(s)||A(s)||P()}function D(s){if(Array.isArray(s))return z(s)}function S(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function A(s,i){if(s){if(typeof s=="string")return z(s,i);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(s,i)}}function z(s,i){(i==null||i>s.length)&&(i=s.length);for(var n=0,a=new Array(i);n<i;n++)a[n]=s[n];return a}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=typeof window<"u"&&typeof window.document<"u",X=H?window:{},W=H&&X.document.documentElement?"ontouchstart"in X.document.documentElement:!1,ut=H?"PointerEvent"in X:!1,N="cropper",C="all",_="crop",$="move",st="zoom",at="e",ht="w",ct="s",rt="n",ot="ne",q="nw",gt="se",Dt="sw",_t="".concat(N,"-crop"),Vt="".concat(N,"-disabled"),nt="".concat(N,"-hidden"),ii="".concat(N,"-hide"),di="".concat(N,"-invisible"),Pt="".concat(N,"-modal"),ei="".concat(N,"-move"),kt="".concat(N,"Action"),pi="".concat(N,"Preview"),yi="crop",Fi="move",Ki="none",xi="crop",Di="cropend",Ei="cropmove",Mi="cropstart",Qi="dblclick",Ze=W?"touchstart":"mousedown",Je=W?"touchmove":"mousemove",ta=W?"touchend touchcancel":"mouseup",Zi=ut?"pointerdown":Ze,Ji=ut?"pointermove":Je,te=ut?"pointerup pointercancel":ta,ie="ready",ee="resize",ae="wheel",Ti="zoom",re="image/jpeg",ia=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ea=/^data:/,aa=/^data:image\/jpeg;base64,/,ra=/^img|canvas$/i,ne=200,oe=100,se={viewMode:0,dragMode:yi,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ne,minContainerHeight:oe,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},na='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',oa=Number.isNaN||X.isNaN;function R(s){return typeof s=="number"&&!oa(s)}var he=function(i){return i>0&&i<1/0};function Ci(s){return typeof s>"u"}function Yt(s){return l(s)==="object"&&s!==null}var sa=Object.prototype.hasOwnProperty;function Gt(s){if(!Yt(s))return!1;try{var i=s.constructor,n=i.prototype;return i&&n&&sa.call(n,"isPrototypeOf")}catch{return!1}}function lt(s){return typeof s=="function"}var ha=Array.prototype.slice;function ce(s){return Array.from?Array.from(s):ha.call(s)}function F(s,i){return s&&lt(i)&&(Array.isArray(s)||R(s.length)?ce(s).forEach(function(n,a){i.call(s,n,a,s)}):Yt(s)&&Object.keys(s).forEach(function(n){i.call(s,s[n],n,s)})),s}var U=Object.assign||function(i){for(var n=arguments.length,a=new Array(n>1?n-1:0),p=1;p<n;p++)a[p-1]=arguments[p];return Yt(i)&&a.length>0&&a.forEach(function(c){Yt(c)&&Object.keys(c).forEach(function(d){i[d]=c[d]})}),i},ca=/\.\d*(?:0|9){12}\d*$/;function $t(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ca.test(s)?Math.round(s*i)/i:s}var la=/^width|height|left|top|marginLeft|marginTop$/;function At(s,i){var n=s.style;F(i,function(a,p){la.test(p)&&R(a)&&(a="".concat(a,"px")),n[p]=a})}function fa(s,i){return s.classList?s.classList.contains(i):s.className.indexOf(i)>-1}function tt(s,i){if(i){if(R(s.length)){F(s,function(a){tt(a,i)});return}if(s.classList){s.classList.add(i);return}var n=s.className.trim();n?n.indexOf(i)<0&&(s.className="".concat(n," ").concat(i)):s.className=i}}function Et(s,i){if(i){if(R(s.length)){F(s,function(n){Et(n,i)});return}if(s.classList){s.classList.remove(i);return}s.className.indexOf(i)>=0&&(s.className=s.className.replace(i,""))}}function qt(s,i,n){if(i){if(R(s.length)){F(s,function(a){qt(a,i,n)});return}n?tt(s,i):Et(s,i)}}var da=/([a-z\d])([A-Z])/g;function Oi(s){return s.replace(da,"$1-$2").toLowerCase()}function Ni(s,i){return Yt(s[i])?s[i]:s.dataset?s.dataset[i]:s.getAttribute("data-".concat(Oi(i)))}function ai(s,i,n){Yt(n)?s[i]=n:s.dataset?s.dataset[i]=n:s.setAttribute("data-".concat(Oi(i)),n)}function pa(s,i){if(Yt(s[i]))try{delete s[i]}catch{s[i]=void 0}else if(s.dataset)try{delete s.dataset[i]}catch{s.dataset[i]=void 0}else s.removeAttribute("data-".concat(Oi(i)))}var le=/\s\s*/,fe=function(){var s=!1;if(H){var i=!1,n=function(){},a=Object.defineProperty({},"once",{get:function(){return s=!0,i},set:function(c){i=c}});X.addEventListener("test",n,a),X.removeEventListener("test",n,a)}return s}();function yt(s,i,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},p=n;i.trim().split(le).forEach(function(c){if(!fe){var d=s.listeners;d&&d[c]&&d[c][n]&&(p=d[c][n],delete d[c][n],Object.keys(d[c]).length===0&&delete d[c],Object.keys(d).length===0&&delete s.listeners)}s.removeEventListener(c,p,a)})}function vt(s,i,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},p=n;i.trim().split(le).forEach(function(c){if(a.once&&!fe){var d=s.listeners,g=d===void 0?{}:d;p=function(){delete g[c][n],s.removeEventListener(c,p,a);for(var x=arguments.length,w=new Array(x),b=0;b<x;b++)w[b]=arguments[b];n.apply(s,w)},g[c]||(g[c]={}),g[c][n]&&s.removeEventListener(c,g[c][n],a),g[c][n]=p,s.listeners=g}s.addEventListener(c,p,a)})}function Ft(s,i,n){var a;return lt(Event)&&lt(CustomEvent)?a=new CustomEvent(i,{detail:n,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(i,!0,!0,n)),s.dispatchEvent(a)}function de(s){var i=s.getBoundingClientRect();return{left:i.left+(window.pageXOffset-document.documentElement.clientLeft),top:i.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ai=X.location,ua=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function pe(s){var i=s.match(ua);return i!==null&&(i[1]!==Ai.protocol||i[2]!==Ai.hostname||i[3]!==Ai.port)}function ue(s){var i="timestamp=".concat(new Date().getTime());return s+(s.indexOf("?")===-1?"?":"&")+i}function ri(s){var i=s.rotate,n=s.scaleX,a=s.scaleY,p=s.translateX,c=s.translateY,d=[];R(p)&&p!==0&&d.push("translateX(".concat(p,"px)")),R(c)&&c!==0&&d.push("translateY(".concat(c,"px)")),R(i)&&i!==0&&d.push("rotate(".concat(i,"deg)")),R(n)&&n!==1&&d.push("scaleX(".concat(n,")")),R(a)&&a!==1&&d.push("scaleY(".concat(a,")"));var g=d.length?d.join(" "):"none";return{WebkitTransform:g,msTransform:g,transform:g}}function ga(s){var i=e({},s),n=0;return F(s,function(a,p){delete i[p],F(i,function(c){var d=Math.abs(a.startX-c.startX),g=Math.abs(a.startY-c.startY),T=Math.abs(a.endX-c.endX),x=Math.abs(a.endY-c.endY),w=Math.sqrt(d*d+g*g),b=Math.sqrt(T*T+x*x),M=(b-w)/w;Math.abs(M)>Math.abs(n)&&(n=M)})}),n}function ui(s,i){var n=s.pageX,a=s.pageY,p={endX:n,endY:a};return i?p:e({startX:n,startY:a},p)}function ma(s){var i=0,n=0,a=0;return F(s,function(p){var c=p.startX,d=p.startY;i+=c,n+=d,a+=1}),i/=a,n/=a,{pageX:i,pageY:n}}function St(s){var i=s.aspectRatio,n=s.height,a=s.width,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",c=he(a),d=he(n);if(c&&d){var g=n*i;p==="contain"&&g>a||p==="cover"&&g<a?n=a/i:a=n*i}else c?n=a/i:d&&(a=n*i);return{width:a,height:n}}function va(s){var i=s.width,n=s.height,a=s.degree;if(a=Math.abs(a)%180,a===90)return{width:n,height:i};var p=a%90*Math.PI/180,c=Math.sin(p),d=Math.cos(p),g=i*d+n*c,T=i*c+n*d;return a>90?{width:T,height:g}:{width:g,height:T}}function wa(s,i,n,a){var p=i.aspectRatio,c=i.naturalWidth,d=i.naturalHeight,g=i.rotate,T=g===void 0?0:g,x=i.scaleX,w=x===void 0?1:x,b=i.scaleY,M=b===void 0?1:b,B=n.aspectRatio,L=n.naturalWidth,j=n.naturalHeight,k=a.fillColor,Z=k===void 0?"transparent":k,it=a.imageSmoothingEnabled,K=it===void 0?!0:it,Ot=a.imageSmoothingQuality,mt=Ot===void 0?"low":Ot,O=a.maxWidth,Y=O===void 0?1/0:O,J=a.maxHeight,wt=J===void 0?1/0:J,Nt=a.minWidth,Xt=Nt===void 0?0:Nt,zt=a.minHeight,Rt=zt===void 0?0:zt,Mt=document.createElement("canvas"),ft=Mt.getContext("2d"),Ht=St({aspectRatio:B,width:Y,height:wt}),gi=St({aspectRatio:B,width:Xt,height:Rt},"cover"),Si=Math.min(Ht.width,Math.max(gi.width,L)),Ri=Math.min(Ht.height,Math.max(gi.height,j)),ve=St({aspectRatio:p,width:Y,height:wt}),we=St({aspectRatio:p,width:Xt,height:Rt},"cover"),be=Math.min(ve.width,Math.max(we.width,c)),ye=Math.min(ve.height,Math.max(we.height,d)),Ia=[-be/2,-ye/2,be,ye];return Mt.width=$t(Si),Mt.height=$t(Ri),ft.fillStyle=Z,ft.fillRect(0,0,Si,Ri),ft.save(),ft.translate(Si/2,Ri/2),ft.rotate(T*Math.PI/180),ft.scale(w,M),ft.imageSmoothingEnabled=K,ft.imageSmoothingQuality=mt,ft.drawImage.apply(ft,[s].concat(m(Ia.map(function(La){return Math.floor($t(La))})))),ft.restore(),Mt}var ge=String.fromCharCode;function ba(s,i,n){var a="";n+=i;for(var p=i;p<n;p+=1)a+=ge(s.getUint8(p));return a}var ya=/^data:.*,/;function xa(s){var i=s.replace(ya,""),n=atob(i),a=new ArrayBuffer(n.length),p=new Uint8Array(a);return F(p,function(c,d){p[d]=n.charCodeAt(d)}),a}function Da(s,i){for(var n=[],a=8192,p=new Uint8Array(s);p.length>0;)n.push(ge.apply(null,ce(p.subarray(0,a)))),p=p.subarray(a);return"data:".concat(i,";base64,").concat(btoa(n.join("")))}function Ea(s){var i=new DataView(s),n;try{var a,p,c;if(i.getUint8(0)===255&&i.getUint8(1)===216)for(var d=i.byteLength,g=2;g+1<d;){if(i.getUint8(g)===255&&i.getUint8(g+1)===225){p=g;break}g+=1}if(p){var T=p+4,x=p+10;if(ba(i,T,4)==="Exif"){var w=i.getUint16(x);if(a=w===18761,(a||w===19789)&&i.getUint16(x+2,a)===42){var b=i.getUint32(x+4,a);b>=8&&(c=x+b)}}}if(c){var M=i.getUint16(c,a),B,L;for(L=0;L<M;L+=1)if(B=c+L*12+2,i.getUint16(B,a)===274){B+=8,n=i.getUint16(B,a),i.setUint16(B,1,a);break}}}catch{n=1}return n}function Ma(s){var i=0,n=1,a=1;switch(s){case 2:n=-1;break;case 3:i=-180;break;case 4:a=-1;break;case 5:i=90,a=-1;break;case 6:i=90;break;case 7:i=90,n=-1;break;case 8:i=-90;break}return{rotate:i,scaleX:n,scaleY:a}}var Ta={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var i=this.element,n=this.options,a=this.container,p=this.cropper,c=Number(n.minContainerWidth),d=Number(n.minContainerHeight);tt(p,nt),Et(i,nt);var g={width:Math.max(a.offsetWidth,c>=0?c:ne),height:Math.max(a.offsetHeight,d>=0?d:oe)};this.containerData=g,At(p,{width:g.width,height:g.height}),tt(i,nt),Et(p,nt)},initCanvas:function(){var i=this.containerData,n=this.imageData,a=this.options.viewMode,p=Math.abs(n.rotate)%180===90,c=p?n.naturalHeight:n.naturalWidth,d=p?n.naturalWidth:n.naturalHeight,g=c/d,T=i.width,x=i.height;i.height*g>i.width?a===3?T=i.height*g:x=i.width/g:a===3?x=i.width/g:T=i.height*g;var w={aspectRatio:g,naturalWidth:c,naturalHeight:d,width:T,height:x};this.canvasData=w,this.limited=a===1||a===2,this.limitCanvas(!0,!0),w.width=Math.min(Math.max(w.width,w.minWidth),w.maxWidth),w.height=Math.min(Math.max(w.height,w.minHeight),w.maxHeight),w.left=(i.width-w.width)/2,w.top=(i.height-w.height)/2,w.oldLeft=w.left,w.oldTop=w.top,this.initialCanvasData=U({},w)},limitCanvas:function(i,n){var a=this.options,p=this.containerData,c=this.canvasData,d=this.cropBoxData,g=a.viewMode,T=c.aspectRatio,x=this.cropped&&d;if(i){var w=Number(a.minCanvasWidth)||0,b=Number(a.minCanvasHeight)||0;g>1?(w=Math.max(w,p.width),b=Math.max(b,p.height),g===3&&(b*T>w?w=b*T:b=w/T)):g>0&&(w?w=Math.max(w,x?d.width:0):b?b=Math.max(b,x?d.height:0):x&&(w=d.width,b=d.height,b*T>w?w=b*T:b=w/T));var M=St({aspectRatio:T,width:w,height:b});w=M.width,b=M.height,c.minWidth=w,c.minHeight=b,c.maxWidth=1/0,c.maxHeight=1/0}if(n)if(g>(x?0:1)){var B=p.width-c.width,L=p.height-c.height;c.minLeft=Math.min(0,B),c.minTop=Math.min(0,L),c.maxLeft=Math.max(0,B),c.maxTop=Math.max(0,L),x&&this.limited&&(c.minLeft=Math.min(d.left,d.left+(d.width-c.width)),c.minTop=Math.min(d.top,d.top+(d.height-c.height)),c.maxLeft=d.left,c.maxTop=d.top,g===2&&(c.width>=p.width&&(c.minLeft=Math.min(0,B),c.maxLeft=Math.max(0,B)),c.height>=p.height&&(c.minTop=Math.min(0,L),c.maxTop=Math.max(0,L))))}else c.minLeft=-c.width,c.minTop=-c.height,c.maxLeft=p.width,c.maxTop=p.height},renderCanvas:function(i,n){var a=this.canvasData,p=this.imageData;if(n){var c=va({width:p.naturalWidth*Math.abs(p.scaleX||1),height:p.naturalHeight*Math.abs(p.scaleY||1),degree:p.rotate||0}),d=c.width,g=c.height,T=a.width*(d/a.naturalWidth),x=a.height*(g/a.naturalHeight);a.left-=(T-a.width)/2,a.top-=(x-a.height)/2,a.width=T,a.height=x,a.aspectRatio=d/g,a.naturalWidth=d,a.naturalHeight=g,this.limitCanvas(!0,!1)}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,At(this.canvas,U({width:a.width,height:a.height},ri({translateX:a.left,translateY:a.top}))),this.renderImage(i),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(i){var n=this.canvasData,a=this.imageData,p=a.naturalWidth*(n.width/n.naturalWidth),c=a.naturalHeight*(n.height/n.naturalHeight);U(a,{width:p,height:c,left:(n.width-p)/2,top:(n.height-c)/2}),At(this.image,U({width:a.width,height:a.height},ri(U({translateX:a.left,translateY:a.top},a)))),i&&this.output()},initCropBox:function(){var i=this.options,n=this.canvasData,a=i.aspectRatio||i.initialAspectRatio,p=Number(i.autoCropArea)||.8,c={width:n.width,height:n.height};a&&(n.height*a>n.width?c.height=c.width/a:c.width=c.height*a),this.cropBoxData=c,this.limitCropBox(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.width=Math.max(c.minWidth,c.width*p),c.height=Math.max(c.minHeight,c.height*p),c.left=n.left+(n.width-c.width)/2,c.top=n.top+(n.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCropBoxData=U({},c)},limitCropBox:function(i,n){var a=this.options,p=this.containerData,c=this.canvasData,d=this.cropBoxData,g=this.limited,T=a.aspectRatio;if(i){var x=Number(a.minCropBoxWidth)||0,w=Number(a.minCropBoxHeight)||0,b=g?Math.min(p.width,c.width,c.width+c.left,p.width-c.left):p.width,M=g?Math.min(p.height,c.height,c.height+c.top,p.height-c.top):p.height;x=Math.min(x,p.width),w=Math.min(w,p.height),T&&(x&&w?w*T>x?w=x/T:x=w*T:x?w=x/T:w&&(x=w*T),M*T>b?M=b/T:b=M*T),d.minWidth=Math.min(x,b),d.minHeight=Math.min(w,M),d.maxWidth=b,d.maxHeight=M}n&&(g?(d.minLeft=Math.max(0,c.left),d.minTop=Math.max(0,c.top),d.maxLeft=Math.min(p.width,c.left+c.width)-d.width,d.maxTop=Math.min(p.height,c.top+c.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=p.width-d.width,d.maxTop=p.height-d.height))},renderCropBox:function(){var i=this.options,n=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,i.movable&&i.cropBoxMovable&&ai(this.face,kt,a.width>=n.width&&a.height>=n.height?$:C),At(this.cropBox,U({width:a.width,height:a.height},ri({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ft(this.element,xi,this.getData())}},Ca={initPreview:function(){var i=this.element,n=this.crossOrigin,a=this.options.preview,p=n?this.crossOriginUrl:this.url,c=i.alt||"The image to preview",d=document.createElement("img");if(n&&(d.crossOrigin=n),d.src=p,d.alt=c,this.viewBox.appendChild(d),this.viewBoxImage=d,!!a){var g=a;typeof a=="string"?g=i.ownerDocument.querySelectorAll(a):a.querySelector&&(g=[a]),this.previews=g,F(g,function(T){var x=document.createElement("img");ai(T,pi,{width:T.offsetWidth,height:T.offsetHeight,html:T.innerHTML}),n&&(x.crossOrigin=n),x.src=p,x.alt=c,x.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',T.innerHTML="",T.appendChild(x)})}},resetPreview:function(){F(this.previews,function(i){var n=Ni(i,pi);At(i,{width:n.width,height:n.height}),i.innerHTML=n.html,pa(i,pi)})},preview:function(){var i=this.imageData,n=this.canvasData,a=this.cropBoxData,p=a.width,c=a.height,d=i.width,g=i.height,T=a.left-n.left-i.left,x=a.top-n.top-i.top;!this.cropped||this.disabled||(At(this.viewBoxImage,U({width:d,height:g},ri(U({translateX:-T,translateY:-x},i)))),F(this.previews,function(w){var b=Ni(w,pi),M=b.width,B=b.height,L=M,j=B,k=1;p&&(k=M/p,j=c*k),c&&j>B&&(k=B/c,L=p*k,j=B),At(w,{width:L,height:j}),At(w.getElementsByTagName("img")[0],U({width:d*k,height:g*k},ri(U({translateX:-T*k,translateY:-x*k},i))))}))}},Oa={bind:function(){var i=this.element,n=this.options,a=this.cropper;lt(n.cropstart)&&vt(i,Mi,n.cropstart),lt(n.cropmove)&&vt(i,Ei,n.cropmove),lt(n.cropend)&&vt(i,Di,n.cropend),lt(n.crop)&&vt(i,xi,n.crop),lt(n.zoom)&&vt(i,Ti,n.zoom),vt(a,Zi,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&vt(a,ae,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&vt(a,Qi,this.onDblclick=this.dblclick.bind(this)),vt(i.ownerDocument,Ji,this.onCropMove=this.cropMove.bind(this)),vt(i.ownerDocument,te,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&vt(window,ee,this.onResize=this.resize.bind(this))},unbind:function(){var i=this.element,n=this.options,a=this.cropper;lt(n.cropstart)&&yt(i,Mi,n.cropstart),lt(n.cropmove)&&yt(i,Ei,n.cropmove),lt(n.cropend)&&yt(i,Di,n.cropend),lt(n.crop)&&yt(i,xi,n.crop),lt(n.zoom)&&yt(i,Ti,n.zoom),yt(a,Zi,this.onCropStart),n.zoomable&&n.zoomOnWheel&&yt(a,ae,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&yt(a,Qi,this.onDblclick),yt(i.ownerDocument,Ji,this.onCropMove),yt(i.ownerDocument,te,this.onCropEnd),n.responsive&&yt(window,ee,this.onResize)}},Na={resize:function(){if(!this.disabled){var i=this.options,n=this.container,a=this.containerData,p=n.offsetWidth/a.width,c=n.offsetHeight/a.height,d=Math.abs(p-1)>Math.abs(c-1)?p:c;if(d!==1){var g,T;i.restore&&(g=this.getCanvasData(),T=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(F(g,function(x,w){g[w]=x*d})),this.setCropBoxData(F(T,function(x,w){T[w]=x*d})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ki||this.setDragMode(fa(this.dragBox,_t)?Fi:yi)},wheel:function(i){var n=this,a=Number(this.options.wheelZoomRatio)||.1,p=1;this.disabled||(i.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),i.deltaY?p=i.deltaY>0?1:-1:i.wheelDelta?p=-i.wheelDelta/120:i.detail&&(p=i.detail>0?1:-1),this.zoom(-p*a,i)))},cropStart:function(i){var n=i.buttons,a=i.button;if(!(this.disabled||(i.type==="mousedown"||i.type==="pointerdown"&&i.pointerType==="mouse")&&(R(n)&&n!==1||R(a)&&a!==0||i.ctrlKey))){var p=this.options,c=this.pointers,d;i.changedTouches?F(i.changedTouches,function(g){c[g.identifier]=ui(g)}):c[i.pointerId||0]=ui(i),Object.keys(c).length>1&&p.zoomable&&p.zoomOnTouch?d=st:d=Ni(i.target,kt),ia.test(d)&&Ft(this.element,Mi,{originalEvent:i,action:d})!==!1&&(i.preventDefault(),this.action=d,this.cropping=!1,d===_&&(this.cropping=!0,tt(this.dragBox,Pt)))}},cropMove:function(i){var n=this.action;if(!(this.disabled||!n)){var a=this.pointers;i.preventDefault(),Ft(this.element,Ei,{originalEvent:i,action:n})!==!1&&(i.changedTouches?F(i.changedTouches,function(p){U(a[p.identifier]||{},ui(p,!0))}):U(a[i.pointerId||0]||{},ui(i,!0)),this.change(i))}},cropEnd:function(i){if(!this.disabled){var n=this.action,a=this.pointers;i.changedTouches?F(i.changedTouches,function(p){delete a[p.identifier]}):delete a[i.pointerId||0],n&&(i.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,qt(this.dragBox,Pt,this.cropped&&this.options.modal)),Ft(this.element,Di,{originalEvent:i,action:n}))}}},Aa={change:function(i){var n=this.options,a=this.canvasData,p=this.containerData,c=this.cropBoxData,d=this.pointers,g=this.action,T=n.aspectRatio,x=c.left,w=c.top,b=c.width,M=c.height,B=x+b,L=w+M,j=0,k=0,Z=p.width,it=p.height,K=!0,Ot;!T&&i.shiftKey&&(T=b&&M?b/M:1),this.limited&&(j=c.minLeft,k=c.minTop,Z=j+Math.min(p.width,a.width,a.left+a.width),it=k+Math.min(p.height,a.height,a.top+a.height));var mt=d[Object.keys(d)[0]],O={x:mt.endX-mt.startX,y:mt.endY-mt.startY},Y=function(wt){switch(wt){case at:B+O.x>Z&&(O.x=Z-B);break;case ht:x+O.x<j&&(O.x=j-x);break;case rt:w+O.y<k&&(O.y=k-w);break;case ct:L+O.y>it&&(O.y=it-L);break}};switch(g){case C:x+=O.x,w+=O.y;break;case at:if(O.x>=0&&(B>=Z||T&&(w<=k||L>=it))){K=!1;break}Y(at),b+=O.x,b<0&&(g=ht,b=-b,x-=b),T&&(M=b/T,w+=(c.height-M)/2);break;case rt:if(O.y<=0&&(w<=k||T&&(x<=j||B>=Z))){K=!1;break}Y(rt),M-=O.y,w+=O.y,M<0&&(g=ct,M=-M,w-=M),T&&(b=M*T,x+=(c.width-b)/2);break;case ht:if(O.x<=0&&(x<=j||T&&(w<=k||L>=it))){K=!1;break}Y(ht),b-=O.x,x+=O.x,b<0&&(g=at,b=-b,x-=b),T&&(M=b/T,w+=(c.height-M)/2);break;case ct:if(O.y>=0&&(L>=it||T&&(x<=j||B>=Z))){K=!1;break}Y(ct),M+=O.y,M<0&&(g=rt,M=-M,w-=M),T&&(b=M*T,x+=(c.width-b)/2);break;case ot:if(T){if(O.y<=0&&(w<=k||B>=Z)){K=!1;break}Y(rt),M-=O.y,w+=O.y,b=M*T}else Y(rt),Y(at),O.x>=0?B<Z?b+=O.x:O.y<=0&&w<=k&&(K=!1):b+=O.x,O.y<=0?w>k&&(M-=O.y,w+=O.y):(M-=O.y,w+=O.y);b<0&&M<0?(g=Dt,M=-M,b=-b,w-=M,x-=b):b<0?(g=q,b=-b,x-=b):M<0&&(g=gt,M=-M,w-=M);break;case q:if(T){if(O.y<=0&&(w<=k||x<=j)){K=!1;break}Y(rt),M-=O.y,w+=O.y,b=M*T,x+=c.width-b}else Y(rt),Y(ht),O.x<=0?x>j?(b-=O.x,x+=O.x):O.y<=0&&w<=k&&(K=!1):(b-=O.x,x+=O.x),O.y<=0?w>k&&(M-=O.y,w+=O.y):(M-=O.y,w+=O.y);b<0&&M<0?(g=gt,M=-M,b=-b,w-=M,x-=b):b<0?(g=ot,b=-b,x-=b):M<0&&(g=Dt,M=-M,w-=M);break;case Dt:if(T){if(O.x<=0&&(x<=j||L>=it)){K=!1;break}Y(ht),b-=O.x,x+=O.x,M=b/T}else Y(ct),Y(ht),O.x<=0?x>j?(b-=O.x,x+=O.x):O.y>=0&&L>=it&&(K=!1):(b-=O.x,x+=O.x),O.y>=0?L<it&&(M+=O.y):M+=O.y;b<0&&M<0?(g=ot,M=-M,b=-b,w-=M,x-=b):b<0?(g=gt,b=-b,x-=b):M<0&&(g=q,M=-M,w-=M);break;case gt:if(T){if(O.x>=0&&(B>=Z||L>=it)){K=!1;break}Y(at),b+=O.x,M=b/T}else Y(ct),Y(at),O.x>=0?B<Z?b+=O.x:O.y>=0&&L>=it&&(K=!1):b+=O.x,O.y>=0?L<it&&(M+=O.y):M+=O.y;b<0&&M<0?(g=q,M=-M,b=-b,w-=M,x-=b):b<0?(g=Dt,b=-b,x-=b):M<0&&(g=ot,M=-M,w-=M);break;case $:this.move(O.x,O.y),K=!1;break;case st:this.zoom(ga(d),i),K=!1;break;case _:if(!O.x||!O.y){K=!1;break}Ot=de(this.cropper),x=mt.startX-Ot.left,w=mt.startY-Ot.top,b=c.minWidth,M=c.minHeight,O.x>0?g=O.y>0?gt:ot:O.x<0&&(x-=b,g=O.y>0?Dt:q),O.y<0&&(w-=M),this.cropped||(Et(this.cropBox,nt),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}K&&(c.width=b,c.height=M,c.left=x,c.top=w,this.action=g,this.renderCropBox()),F(d,function(J){J.startX=J.endX,J.startY=J.endY})}},Sa={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&tt(this.dragBox,Pt),Et(this.cropBox,nt),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=U({},this.initialImageData),this.canvasData=U({},this.initialCanvasData),this.cropBoxData=U({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(U(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Et(this.dragBox,Pt),tt(this.cropBox,nt)),this},replace:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&i&&(this.isImg&&(this.element.src=i),n?(this.url=i,this.image.src=i,this.ready&&(this.viewBoxImage.src=i,F(this.previews,function(a){a.getElementsByTagName("img")[0].src=i}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(i))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Et(this.cropper,Vt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,tt(this.cropper,Vt)),this},destroy:function(){var i=this.element;return i[N]?(i[N]=void 0,this.isImg&&this.replaced&&(i.src=this.originalUrl),this.uncreate(),this):this},move:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,a=this.canvasData,p=a.left,c=a.top;return this.moveTo(Ci(i)?i:p+Number(i),Ci(n)?n:c+Number(n))},moveTo:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,a=this.canvasData,p=!1;return i=Number(i),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(R(i)&&(a.left=i,p=!0),R(n)&&(a.top=n,p=!0),p&&this.renderCanvas(!0)),this},zoom:function(i,n){var a=this.canvasData;return i=Number(i),i<0?i=1/(1-i):i=1+i,this.zoomTo(a.width*i/a.naturalWidth,null,n)},zoomTo:function(i,n,a){var p=this.options,c=this.canvasData,d=c.width,g=c.height,T=c.naturalWidth,x=c.naturalHeight;if(i=Number(i),i>=0&&this.ready&&!this.disabled&&p.zoomable){var w=T*i,b=x*i;if(Ft(this.element,Ti,{ratio:i,oldRatio:d/T,originalEvent:a})===!1)return this;if(a){var M=this.pointers,B=de(this.cropper),L=M&&Object.keys(M).length?ma(M):{pageX:a.pageX,pageY:a.pageY};c.left-=(w-d)*((L.pageX-B.left-c.left)/d),c.top-=(b-g)*((L.pageY-B.top-c.top)/g)}else Gt(n)&&R(n.x)&&R(n.y)?(c.left-=(w-d)*((n.x-c.left)/d),c.top-=(b-g)*((n.y-c.top)/g)):(c.left-=(w-d)/2,c.top-=(b-g)/2);c.width=w,c.height=b,this.renderCanvas(!0)}return this},rotate:function(i){return this.rotateTo((this.imageData.rotate||0)+Number(i))},rotateTo:function(i){return i=Number(i),R(i)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=i%360,this.renderCanvas(!0,!0)),this},scaleX:function(i){var n=this.imageData.scaleY;return this.scale(i,R(n)?n:1)},scaleY:function(i){var n=this.imageData.scaleX;return this.scale(R(n)?n:1,i)},scale:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,a=this.imageData,p=!1;return i=Number(i),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(R(i)&&(a.scaleX=i,p=!0),R(n)&&(a.scaleY=n,p=!0),p&&this.renderCanvas(!0,!0)),this},getData:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,a=this.imageData,p=this.canvasData,c=this.cropBoxData,d;if(this.ready&&this.cropped){d={x:c.left-p.left,y:c.top-p.top,width:c.width,height:c.height};var g=a.width/a.naturalWidth;if(F(d,function(w,b){d[b]=w/g}),i){var T=Math.round(d.y+d.height),x=Math.round(d.x+d.width);d.x=Math.round(d.x),d.y=Math.round(d.y),d.width=x-d.x,d.height=T-d.y}}else d={x:0,y:0,width:0,height:0};return n.rotatable&&(d.rotate=a.rotate||0),n.scalable&&(d.scaleX=a.scaleX||1,d.scaleY=a.scaleY||1),d},setData:function(i){var n=this.options,a=this.imageData,p=this.canvasData,c={};if(this.ready&&!this.disabled&&Gt(i)){var d=!1;n.rotatable&&R(i.rotate)&&i.rotate!==a.rotate&&(a.rotate=i.rotate,d=!0),n.scalable&&(R(i.scaleX)&&i.scaleX!==a.scaleX&&(a.scaleX=i.scaleX,d=!0),R(i.scaleY)&&i.scaleY!==a.scaleY&&(a.scaleY=i.scaleY,d=!0)),d&&this.renderCanvas(!0,!0);var g=a.width/a.naturalWidth;R(i.x)&&(c.left=i.x*g+p.left),R(i.y)&&(c.top=i.y*g+p.top),R(i.width)&&(c.width=i.width*g),R(i.height)&&(c.height=i.height*g),this.setCropBoxData(c)}return this},getContainerData:function(){return this.ready?U({},this.containerData):{}},getImageData:function(){return this.sized?U({},this.imageData):{}},getCanvasData:function(){var i=this.canvasData,n={};return this.ready&&F(["left","top","width","height","naturalWidth","naturalHeight"],function(a){n[a]=i[a]}),n},setCanvasData:function(i){var n=this.canvasData,a=n.aspectRatio;return this.ready&&!this.disabled&&Gt(i)&&(R(i.left)&&(n.left=i.left),R(i.top)&&(n.top=i.top),R(i.width)?(n.width=i.width,n.height=i.width/a):R(i.height)&&(n.height=i.height,n.width=i.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var i=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:i.left,top:i.top,width:i.width,height:i.height}),n||{}},setCropBoxData:function(i){var n=this.cropBoxData,a=this.options.aspectRatio,p,c;return this.ready&&this.cropped&&!this.disabled&&Gt(i)&&(R(i.left)&&(n.left=i.left),R(i.top)&&(n.top=i.top),R(i.width)&&i.width!==n.width&&(p=!0,n.width=i.width),R(i.height)&&i.height!==n.height&&(c=!0,n.height=i.height),a&&(p?n.height=n.width/a:c&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,a=wa(this.image,this.imageData,n,i);if(!this.cropped)return a;var p=this.getData(i.rounded),c=p.x,d=p.y,g=p.width,T=p.height,x=a.width/Math.floor(n.naturalWidth);x!==1&&(c*=x,d*=x,g*=x,T*=x);var w=g/T,b=St({aspectRatio:w,width:i.maxWidth||1/0,height:i.maxHeight||1/0}),M=St({aspectRatio:w,width:i.minWidth||0,height:i.minHeight||0},"cover"),B=St({aspectRatio:w,width:i.width||(x!==1?a.width:g),height:i.height||(x!==1?a.height:T)}),L=B.width,j=B.height;L=Math.min(b.width,Math.max(M.width,L)),j=Math.min(b.height,Math.max(M.height,j));var k=document.createElement("canvas"),Z=k.getContext("2d");k.width=$t(L),k.height=$t(j),Z.fillStyle=i.fillColor||"transparent",Z.fillRect(0,0,L,j);var it=i.imageSmoothingEnabled,K=it===void 0?!0:it,Ot=i.imageSmoothingQuality;Z.imageSmoothingEnabled=K,Ot&&(Z.imageSmoothingQuality=Ot);var mt=a.width,O=a.height,Y=c,J=d,wt,Nt,Xt,zt,Rt,Mt;Y<=-g||Y>mt?(Y=0,wt=0,Xt=0,Rt=0):Y<=0?(Xt=-Y,Y=0,wt=Math.min(mt,g+Y),Rt=wt):Y<=mt&&(Xt=0,wt=Math.min(g,mt-Y),Rt=wt),wt<=0||J<=-T||J>O?(J=0,Nt=0,zt=0,Mt=0):J<=0?(zt=-J,J=0,Nt=Math.min(O,T+J),Mt=Nt):J<=O&&(zt=0,Nt=Math.min(T,O-J),Mt=Nt);var ft=[Y,J,wt,Nt];if(Rt>0&&Mt>0){var Ht=L/g;ft.push(Xt*Ht,zt*Ht,Rt*Ht,Mt*Ht)}return Z.drawImage.apply(Z,[a].concat(m(ft.map(function(gi){return Math.floor($t(gi))})))),k},setAspectRatio:function(i){var n=this.options;return!this.disabled&&!Ci(i)&&(n.aspectRatio=Math.max(0,i)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(i){var n=this.options,a=this.dragBox,p=this.face;if(this.ready&&!this.disabled){var c=i===yi,d=n.movable&&i===Fi;i=c||d?i:Ki,n.dragMode=i,ai(a,kt,i),qt(a,_t,c),qt(a,ei,d),n.cropBoxMovable||(ai(p,kt,i),qt(p,_t,c),qt(p,ei,d))}return this}},Ra=X.Cropper,me=function(){function s(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(u(this,s),!i||!ra.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i,this.options=U({},se,Gt(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return y(s,[{key:"init",value:function(){var n=this.element,a=n.tagName.toLowerCase(),p;if(!n[N]){if(n[N]=this,a==="img"){if(this.isImg=!0,p=n.getAttribute("src")||"",this.originalUrl=p,!p)return;p=n.src}else a==="canvas"&&window.HTMLCanvasElement&&(p=n.toDataURL());this.load(p)}}},{key:"load",value:function(n){var a=this;if(n){this.url=n,this.imageData={};var p=this.element,c=this.options;if(!c.rotatable&&!c.scalable&&(c.checkOrientation=!1),!c.checkOrientation||!window.ArrayBuffer){this.clone();return}if(ea.test(n)){aa.test(n)?this.read(xa(n)):this.clone();return}var d=new XMLHttpRequest,g=this.clone.bind(this);this.reloading=!0,this.xhr=d,d.onabort=g,d.onerror=g,d.ontimeout=g,d.onprogress=function(){d.getResponseHeader("content-type")!==re&&d.abort()},d.onload=function(){a.read(d.response)},d.onloadend=function(){a.reloading=!1,a.xhr=null},c.checkCrossOrigin&&pe(n)&&p.crossOrigin&&(n=ue(n)),d.open("GET",n,!0),d.responseType="arraybuffer",d.withCredentials=p.crossOrigin==="use-credentials",d.send()}}},{key:"read",value:function(n){var a=this.options,p=this.imageData,c=Ea(n),d=0,g=1,T=1;if(c>1){this.url=Da(n,re);var x=Ma(c);d=x.rotate,g=x.scaleX,T=x.scaleY}a.rotatable&&(p.rotate=d),a.scalable&&(p.scaleX=g,p.scaleY=T),this.clone()}},{key:"clone",value:function(){var n=this.element,a=this.url,p=n.crossOrigin,c=a;this.options.checkCrossOrigin&&pe(a)&&(p||(p="anonymous"),c=ue(a)),this.crossOrigin=p,this.crossOriginUrl=c;var d=document.createElement("img");p&&(d.crossOrigin=p),d.src=c||a,d.alt=n.alt||"The image to crop",this.image=d,d.onload=this.start.bind(this),d.onerror=this.stop.bind(this),tt(d,ii),n.parentNode.insertBefore(d,n.nextSibling)}},{key:"start",value:function(){var n=this,a=this.image;a.onload=null,a.onerror=null,this.sizing=!0;var p=X.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(X.navigator.userAgent),c=function(x,w){U(n.imageData,{naturalWidth:x,naturalHeight:w,aspectRatio:x/w}),n.initialImageData=U({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(a.naturalWidth&&!p){c(a.naturalWidth,a.naturalHeight);return}var d=document.createElement("img"),g=document.body||document.documentElement;this.sizingImage=d,d.onload=function(){c(d.width,d.height),p||g.removeChild(d)},d.src=a.src,p||(d.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",g.appendChild(d))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,a=this.options,p=this.image,c=n.parentNode,d=document.createElement("div");d.innerHTML=na;var g=d.querySelector(".".concat(N,"-container")),T=g.querySelector(".".concat(N,"-canvas")),x=g.querySelector(".".concat(N,"-drag-box")),w=g.querySelector(".".concat(N,"-crop-box")),b=w.querySelector(".".concat(N,"-face"));this.container=c,this.cropper=g,this.canvas=T,this.dragBox=x,this.cropBox=w,this.viewBox=g.querySelector(".".concat(N,"-view-box")),this.face=b,T.appendChild(p),tt(n,nt),c.insertBefore(g,n.nextSibling),Et(p,ii),this.initPreview(),this.bind(),a.initialAspectRatio=Math.max(0,a.initialAspectRatio)||NaN,a.aspectRatio=Math.max(0,a.aspectRatio)||NaN,a.viewMode=Math.max(0,Math.min(3,Math.round(a.viewMode)))||0,tt(w,nt),a.guides||tt(w.getElementsByClassName("".concat(N,"-dashed")),nt),a.center||tt(w.getElementsByClassName("".concat(N,"-center")),nt),a.background&&tt(g,"".concat(N,"-bg")),a.highlight||tt(b,di),a.cropBoxMovable&&(tt(b,ei),ai(b,kt,C)),a.cropBoxResizable||(tt(w.getElementsByClassName("".concat(N,"-line")),nt),tt(w.getElementsByClassName("".concat(N,"-point")),nt)),this.render(),this.ready=!0,this.setDragMode(a.dragMode),a.autoCrop&&this.crop(),this.setData(a.data),lt(a.ready)&&vt(n,ie,a.ready,{once:!0}),Ft(n,ie)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),Et(this.element,nt)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Ra,s}},{key:"setDefaults",value:function(n){U(se,Gt(n)&&n)}}])}();return U(me.prototype,Ta,Ca,Oa,Na,Aa,Sa),me})})(_a);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function xe(o,t){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);t&&(e=e.filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable})),r.push.apply(r,e)}return r}function ke(o){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xe(Object(r),!0).forEach(function(e){Xa(o,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))})}return o}function Pa(o,t){if(typeof o!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var e=r.call(o,t||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function Ye(o){var t=Pa(o,"string");return typeof t=="symbol"?t:t+""}function Bi(o){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(o)}function ka(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function De(o,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Ye(e.key),e)}}function Ya(o,t,r){return t&&De(o.prototype,t),r&&De(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}function Xa(o,t,r){return t=Ye(t),t in o?Object.defineProperty(o,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[t]=r,o}function Xe(o){return za(o)||Ha(o)||Wa(o)||Ua()}function za(o){if(Array.isArray(o))return _i(o)}function Ha(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function Wa(o,t){if(o){if(typeof o=="string")return _i(o,t);var r=Object.prototype.toString.call(o).slice(8,-1);if(r==="Object"&&o.constructor&&(r=o.constructor.name),r==="Map"||r==="Set")return Array.from(o);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _i(o,t)}}function _i(o,t){(t==null||t>o.length)&&(t=o.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=o[r];return e}function Ua(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bi=typeof window<"u"&&typeof window.document<"u",Ct=bi?window:{},ji=bi&&Ct.document.documentElement?"ontouchstart"in Ct.document.documentElement:!1,Vi=bi?"PointerEvent"in Ct:!1,V="cropper",Gi="all",ze="crop",He="move",We="zoom",Wt="e",Ut="w",Kt="s",It="n",ni="ne",oi="nw",si="se",hi="sw",Pi="".concat(V,"-crop"),Ee="".concat(V,"-disabled"),pt="".concat(V,"-hidden"),Me="".concat(V,"-hide"),ja="".concat(V,"-invisible"),wi="".concat(V,"-modal"),ki="".concat(V,"-move"),li="".concat(V,"Action"),mi="".concat(V,"Preview"),$i="crop",Ue="move",je="none",Yi="crop",Xi="cropend",zi="cropmove",Hi="cropstart",Te="dblclick",Va=ji?"touchstart":"mousedown",Ga=ji?"touchmove":"mousemove",$a=ji?"touchend touchcancel":"mouseup",Ce=Vi?"pointerdown":Va,Oe=Vi?"pointermove":Ga,Ne=Vi?"pointerup pointercancel":$a,Ae="ready",Se="resize",Re="wheel",Wi="zoom",Ie="image/jpeg",qa=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Fa=/^data:/,Ka=/^data:image\/jpeg;base64,/,Qa=/^img|canvas$/i,Ve=200,Ge=100,Le={viewMode:0,dragMode:$i,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Ve,minContainerHeight:Ge,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Za='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ja=Number.isNaN||Ct.isNaN;function I(o){return typeof o=="number"&&!Ja(o)}var Be=function(t){return t>0&&t<1/0};function Ii(o){return typeof o>"u"}function jt(o){return Bi(o)==="object"&&o!==null}var tr=Object.prototype.hasOwnProperty;function Qt(o){if(!jt(o))return!1;try{var t=o.constructor,r=t.prototype;return t&&r&&tr.call(r,"isPrototypeOf")}catch{return!1}}function dt(o){return typeof o=="function"}var ir=Array.prototype.slice;function $e(o){return Array.from?Array.from(o):ir.call(o)}function Q(o,t){return o&&dt(t)&&(Array.isArray(o)||I(o.length)?$e(o).forEach(function(r,e){t.call(o,r,e,o)}):jt(o)&&Object.keys(o).forEach(function(r){t.call(o,o[r],r,o)})),o}var G=Object.assign||function(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),f=1;f<r;f++)e[f-1]=arguments[f];return jt(t)&&e.length>0&&e.forEach(function(h){jt(h)&&Object.keys(h).forEach(function(l){t[l]=h[l]})}),t},er=/\.\d*(?:0|9){12}\d*$/;function Jt(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return er.test(o)?Math.round(o*t)/t:o}var ar=/^width|height|left|top|marginLeft|marginTop$/;function Lt(o,t){var r=o.style;Q(t,function(e,f){ar.test(f)&&I(e)&&(e="".concat(e,"px")),r[f]=e})}function rr(o,t){return o.classList?o.classList.contains(t):o.className.indexOf(t)>-1}function et(o,t){if(t){if(I(o.length)){Q(o,function(e){et(e,t)});return}if(o.classList){o.classList.add(t);return}var r=o.className.trim();r?r.indexOf(t)<0&&(o.className="".concat(r," ").concat(t)):o.className=t}}function Tt(o,t){if(t){if(I(o.length)){Q(o,function(r){Tt(r,t)});return}if(o.classList){o.classList.remove(t);return}o.className.indexOf(t)>=0&&(o.className=o.className.replace(t,""))}}function Zt(o,t,r){if(t){if(I(o.length)){Q(o,function(e){Zt(e,t,r)});return}r?et(o,t):Tt(o,t)}}var nr=/([a-z\d])([A-Z])/g;function qi(o){return o.replace(nr,"$1-$2").toLowerCase()}function Ui(o,t){return jt(o[t])?o[t]:o.dataset?o.dataset[t]:o.getAttribute("data-".concat(qi(t)))}function fi(o,t,r){jt(r)?o[t]=r:o.dataset?o.dataset[t]=r:o.setAttribute("data-".concat(qi(t)),r)}function or(o,t){if(jt(o[t]))try{delete o[t]}catch{o[t]=void 0}else if(o.dataset)try{delete o.dataset[t]}catch{o.dataset[t]=void 0}else o.removeAttribute("data-".concat(qi(t)))}var qe=/\s\s*/,Fe=function(){var o=!1;if(bi){var t=!1,r=function(){},e=Object.defineProperty({},"once",{get:function(){return o=!0,t},set:function(h){t=h}});Ct.addEventListener("test",r,e),Ct.removeEventListener("test",r,e)}return o}();function xt(o,t,r){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},f=r;t.trim().split(qe).forEach(function(h){if(!Fe){var l=o.listeners;l&&l[h]&&l[h][r]&&(f=l[h][r],delete l[h][r],Object.keys(l[h]).length===0&&delete l[h],Object.keys(l).length===0&&delete o.listeners)}o.removeEventListener(h,f,e)})}function bt(o,t,r){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},f=r;t.trim().split(qe).forEach(function(h){if(e.once&&!Fe){var l=o.listeners,u=l===void 0?{}:l;f=function(){delete u[h][r],o.removeEventListener(h,f,e);for(var y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];r.apply(o,v)},u[h]||(u[h]={}),u[h][r]&&o.removeEventListener(h,u[h][r],e),u[h][r]=f,o.listeners=u}o.addEventListener(h,f,e)})}function ti(o,t,r){var e;return dt(Event)&&dt(CustomEvent)?e=new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0}):(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!0,!0,r)),o.dispatchEvent(e)}function Ke(o){var t=o.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Li=Ct.location,sr=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function _e(o){var t=o.match(sr);return t!==null&&(t[1]!==Li.protocol||t[2]!==Li.hostname||t[3]!==Li.port)}function Pe(o){var t="timestamp=".concat(new Date().getTime());return o+(o.indexOf("?")===-1?"?":"&")+t}function ci(o){var t=o.rotate,r=o.scaleX,e=o.scaleY,f=o.translateX,h=o.translateY,l=[];I(f)&&f!==0&&l.push("translateX(".concat(f,"px)")),I(h)&&h!==0&&l.push("translateY(".concat(h,"px)")),I(t)&&t!==0&&l.push("rotate(".concat(t,"deg)")),I(r)&&r!==1&&l.push("scaleX(".concat(r,")")),I(e)&&e!==1&&l.push("scaleY(".concat(e,")"));var u=l.length?l.join(" "):"none";return{WebkitTransform:u,msTransform:u,transform:u}}function hr(o){var t=ke({},o),r=0;return Q(o,function(e,f){delete t[f],Q(t,function(h){var l=Math.abs(e.startX-h.startX),u=Math.abs(e.startY-h.startY),E=Math.abs(e.endX-h.endX),y=Math.abs(e.endY-h.endY),v=Math.sqrt(l*l+u*u),m=Math.sqrt(E*E+y*y),D=(m-v)/v;Math.abs(D)>Math.abs(r)&&(r=D)})}),r}function vi(o,t){var r=o.pageX,e=o.pageY,f={endX:r,endY:e};return t?f:ke({startX:r,startY:e},f)}function cr(o){var t=0,r=0,e=0;return Q(o,function(f){var h=f.startX,l=f.startY;t+=h,r+=l,e+=1}),t/=e,r/=e,{pageX:t,pageY:r}}function Bt(o){var t=o.aspectRatio,r=o.height,e=o.width,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",h=Be(e),l=Be(r);if(h&&l){var u=r*t;f==="contain"&&u>e||f==="cover"&&u<e?r=e/t:e=r*t}else h?r=e/t:l&&(e=r*t);return{width:e,height:r}}function lr(o){var t=o.width,r=o.height,e=o.degree;if(e=Math.abs(e)%180,e===90)return{width:r,height:t};var f=e%90*Math.PI/180,h=Math.sin(f),l=Math.cos(f),u=t*l+r*h,E=t*h+r*l;return e>90?{width:E,height:u}:{width:u,height:E}}function fr(o,t,r,e){var f=t.aspectRatio,h=t.naturalWidth,l=t.naturalHeight,u=t.rotate,E=u===void 0?0:u,y=t.scaleX,v=y===void 0?1:y,m=t.scaleY,D=m===void 0?1:m,S=r.aspectRatio,A=r.naturalWidth,z=r.naturalHeight,P=e.fillColor,H=P===void 0?"transparent":P,X=e.imageSmoothingEnabled,W=X===void 0?!0:X,ut=e.imageSmoothingQuality,N=ut===void 0?"low":ut,C=e.maxWidth,_=C===void 0?1/0:C,$=e.maxHeight,st=$===void 0?1/0:$,at=e.minWidth,ht=at===void 0?0:at,ct=e.minHeight,rt=ct===void 0?0:ct,ot=document.createElement("canvas"),q=ot.getContext("2d"),gt=Bt({aspectRatio:S,width:_,height:st}),Dt=Bt({aspectRatio:S,width:ht,height:rt},"cover"),_t=Math.min(gt.width,Math.max(Dt.width,A)),Vt=Math.min(gt.height,Math.max(Dt.height,z)),nt=Bt({aspectRatio:f,width:_,height:st}),ii=Bt({aspectRatio:f,width:ht,height:rt},"cover"),di=Math.min(nt.width,Math.max(ii.width,h)),Pt=Math.min(nt.height,Math.max(ii.height,l)),ei=[-di/2,-Pt/2,di,Pt];return ot.width=Jt(_t),ot.height=Jt(Vt),q.fillStyle=H,q.fillRect(0,0,_t,Vt),q.save(),q.translate(_t/2,Vt/2),q.rotate(E*Math.PI/180),q.scale(v,D),q.imageSmoothingEnabled=W,q.imageSmoothingQuality=N,q.drawImage.apply(q,[o].concat(Xe(ei.map(function(kt){return Math.floor(Jt(kt))})))),q.restore(),ot}var Qe=String.fromCharCode;function dr(o,t,r){var e="";r+=t;for(var f=t;f<r;f+=1)e+=Qe(o.getUint8(f));return e}var pr=/^data:.*,/;function ur(o){var t=o.replace(pr,""),r=atob(t),e=new ArrayBuffer(r.length),f=new Uint8Array(e);return Q(f,function(h,l){f[l]=r.charCodeAt(l)}),e}function gr(o,t){for(var r=[],e=8192,f=new Uint8Array(o);f.length>0;)r.push(Qe.apply(null,$e(f.subarray(0,e)))),f=f.subarray(e);return"data:".concat(t,";base64,").concat(btoa(r.join("")))}function mr(o){var t=new DataView(o),r;try{var e,f,h;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var l=t.byteLength,u=2;u+1<l;){if(t.getUint8(u)===255&&t.getUint8(u+1)===225){f=u;break}u+=1}if(f){var E=f+4,y=f+10;if(dr(t,E,4)==="Exif"){var v=t.getUint16(y);if(e=v===18761,(e||v===19789)&&t.getUint16(y+2,e)===42){var m=t.getUint32(y+4,e);m>=8&&(h=y+m)}}}if(h){var D=t.getUint16(h,e),S,A;for(A=0;A<D;A+=1)if(S=h+A*12+2,t.getUint16(S,e)===274){S+=8,r=t.getUint16(S,e),t.setUint16(S,1,e);break}}}catch{r=1}return r}function vr(o){var t=0,r=1,e=1;switch(o){case 2:r=-1;break;case 3:t=-180;break;case 4:e=-1;break;case 5:t=90,e=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:r,scaleY:e}}var wr={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,r=this.options,e=this.container,f=this.cropper,h=Number(r.minContainerWidth),l=Number(r.minContainerHeight);et(f,pt),Tt(t,pt);var u={width:Math.max(e.offsetWidth,h>=0?h:Ve),height:Math.max(e.offsetHeight,l>=0?l:Ge)};this.containerData=u,Lt(f,{width:u.width,height:u.height}),et(t,pt),Tt(f,pt)},initCanvas:function(){var t=this.containerData,r=this.imageData,e=this.options.viewMode,f=Math.abs(r.rotate)%180===90,h=f?r.naturalHeight:r.naturalWidth,l=f?r.naturalWidth:r.naturalHeight,u=h/l,E=t.width,y=t.height;t.height*u>t.width?e===3?E=t.height*u:y=t.width/u:e===3?y=t.width/u:E=t.height*u;var v={aspectRatio:u,naturalWidth:h,naturalHeight:l,width:E,height:y};this.canvasData=v,this.limited=e===1||e===2,this.limitCanvas(!0,!0),v.width=Math.min(Math.max(v.width,v.minWidth),v.maxWidth),v.height=Math.min(Math.max(v.height,v.minHeight),v.maxHeight),v.left=(t.width-v.width)/2,v.top=(t.height-v.height)/2,v.oldLeft=v.left,v.oldTop=v.top,this.initialCanvasData=G({},v)},limitCanvas:function(t,r){var e=this.options,f=this.containerData,h=this.canvasData,l=this.cropBoxData,u=e.viewMode,E=h.aspectRatio,y=this.cropped&&l;if(t){var v=Number(e.minCanvasWidth)||0,m=Number(e.minCanvasHeight)||0;u>1?(v=Math.max(v,f.width),m=Math.max(m,f.height),u===3&&(m*E>v?v=m*E:m=v/E)):u>0&&(v?v=Math.max(v,y?l.width:0):m?m=Math.max(m,y?l.height:0):y&&(v=l.width,m=l.height,m*E>v?v=m*E:m=v/E));var D=Bt({aspectRatio:E,width:v,height:m});v=D.width,m=D.height,h.minWidth=v,h.minHeight=m,h.maxWidth=1/0,h.maxHeight=1/0}if(r)if(u>(y?0:1)){var S=f.width-h.width,A=f.height-h.height;h.minLeft=Math.min(0,S),h.minTop=Math.min(0,A),h.maxLeft=Math.max(0,S),h.maxTop=Math.max(0,A),y&&this.limited&&(h.minLeft=Math.min(l.left,l.left+(l.width-h.width)),h.minTop=Math.min(l.top,l.top+(l.height-h.height)),h.maxLeft=l.left,h.maxTop=l.top,u===2&&(h.width>=f.width&&(h.minLeft=Math.min(0,S),h.maxLeft=Math.max(0,S)),h.height>=f.height&&(h.minTop=Math.min(0,A),h.maxTop=Math.max(0,A))))}else h.minLeft=-h.width,h.minTop=-h.height,h.maxLeft=f.width,h.maxTop=f.height},renderCanvas:function(t,r){var e=this.canvasData,f=this.imageData;if(r){var h=lr({width:f.naturalWidth*Math.abs(f.scaleX||1),height:f.naturalHeight*Math.abs(f.scaleY||1),degree:f.rotate||0}),l=h.width,u=h.height,E=e.width*(l/e.naturalWidth),y=e.height*(u/e.naturalHeight);e.left-=(E-e.width)/2,e.top-=(y-e.height)/2,e.width=E,e.height=y,e.aspectRatio=l/u,e.naturalWidth=l,e.naturalHeight=u,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,Lt(this.canvas,G({width:e.width,height:e.height},ci({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var r=this.canvasData,e=this.imageData,f=e.naturalWidth*(r.width/r.naturalWidth),h=e.naturalHeight*(r.height/r.naturalHeight);G(e,{width:f,height:h,left:(r.width-f)/2,top:(r.height-h)/2}),Lt(this.image,G({width:e.width,height:e.height},ci(G({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,r=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,f=Number(t.autoCropArea)||.8,h={width:r.width,height:r.height};e&&(r.height*e>r.width?h.height=h.width/e:h.width=h.height*e),this.cropBoxData=h,this.limitCropBox(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.width=Math.max(h.minWidth,h.width*f),h.height=Math.max(h.minHeight,h.height*f),h.left=r.left+(r.width-h.width)/2,h.top=r.top+(r.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCropBoxData=G({},h)},limitCropBox:function(t,r){var e=this.options,f=this.containerData,h=this.canvasData,l=this.cropBoxData,u=this.limited,E=e.aspectRatio;if(t){var y=Number(e.minCropBoxWidth)||0,v=Number(e.minCropBoxHeight)||0,m=u?Math.min(f.width,h.width,h.width+h.left,f.width-h.left):f.width,D=u?Math.min(f.height,h.height,h.height+h.top,f.height-h.top):f.height;y=Math.min(y,f.width),v=Math.min(v,f.height),E&&(y&&v?v*E>y?v=y/E:y=v*E:y?v=y/E:v&&(y=v*E),D*E>m?D=m/E:m=D*E),l.minWidth=Math.min(y,m),l.minHeight=Math.min(v,D),l.maxWidth=m,l.maxHeight=D}r&&(u?(l.minLeft=Math.max(0,h.left),l.minTop=Math.max(0,h.top),l.maxLeft=Math.min(f.width,h.left+h.width)-l.width,l.maxTop=Math.min(f.height,h.top+h.height)-l.height):(l.minLeft=0,l.minTop=0,l.maxLeft=f.width-l.width,l.maxTop=f.height-l.height))},renderCropBox:function(){var t=this.options,r=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&fi(this.face,li,e.width>=r.width&&e.height>=r.height?He:Gi),Lt(this.cropBox,G({width:e.width,height:e.height},ci({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ti(this.element,Yi,this.getData())}},br={initPreview:function(){var t=this.element,r=this.crossOrigin,e=this.options.preview,f=r?this.crossOriginUrl:this.url,h=t.alt||"The image to preview",l=document.createElement("img");if(r&&(l.crossOrigin=r),l.src=f,l.alt=h,this.viewBox.appendChild(l),this.viewBoxImage=l,!!e){var u=e;typeof e=="string"?u=t.ownerDocument.querySelectorAll(e):e.querySelector&&(u=[e]),this.previews=u,Q(u,function(E){var y=document.createElement("img");fi(E,mi,{width:E.offsetWidth,height:E.offsetHeight,html:E.innerHTML}),r&&(y.crossOrigin=r),y.src=f,y.alt=h,y.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',E.innerHTML="",E.appendChild(y)})}},resetPreview:function(){Q(this.previews,function(t){var r=Ui(t,mi);Lt(t,{width:r.width,height:r.height}),t.innerHTML=r.html,or(t,mi)})},preview:function(){var t=this.imageData,r=this.canvasData,e=this.cropBoxData,f=e.width,h=e.height,l=t.width,u=t.height,E=e.left-r.left-t.left,y=e.top-r.top-t.top;!this.cropped||this.disabled||(Lt(this.viewBoxImage,G({width:l,height:u},ci(G({translateX:-E,translateY:-y},t)))),Q(this.previews,function(v){var m=Ui(v,mi),D=m.width,S=m.height,A=D,z=S,P=1;f&&(P=D/f,z=h*P),h&&z>S&&(P=S/h,A=f*P,z=S),Lt(v,{width:A,height:z}),Lt(v.getElementsByTagName("img")[0],G({width:l*P,height:u*P},ci(G({translateX:-E*P,translateY:-y*P},t))))}))}},yr={bind:function(){var t=this.element,r=this.options,e=this.cropper;dt(r.cropstart)&&bt(t,Hi,r.cropstart),dt(r.cropmove)&&bt(t,zi,r.cropmove),dt(r.cropend)&&bt(t,Xi,r.cropend),dt(r.crop)&&bt(t,Yi,r.crop),dt(r.zoom)&&bt(t,Wi,r.zoom),bt(e,Ce,this.onCropStart=this.cropStart.bind(this)),r.zoomable&&r.zoomOnWheel&&bt(e,Re,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&bt(e,Te,this.onDblclick=this.dblclick.bind(this)),bt(t.ownerDocument,Oe,this.onCropMove=this.cropMove.bind(this)),bt(t.ownerDocument,Ne,this.onCropEnd=this.cropEnd.bind(this)),r.responsive&&bt(window,Se,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,r=this.options,e=this.cropper;dt(r.cropstart)&&xt(t,Hi,r.cropstart),dt(r.cropmove)&&xt(t,zi,r.cropmove),dt(r.cropend)&&xt(t,Xi,r.cropend),dt(r.crop)&&xt(t,Yi,r.crop),dt(r.zoom)&&xt(t,Wi,r.zoom),xt(e,Ce,this.onCropStart),r.zoomable&&r.zoomOnWheel&&xt(e,Re,this.onWheel,{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&xt(e,Te,this.onDblclick),xt(t.ownerDocument,Oe,this.onCropMove),xt(t.ownerDocument,Ne,this.onCropEnd),r.responsive&&xt(window,Se,this.onResize)}},xr={resize:function(){if(!this.disabled){var t=this.options,r=this.container,e=this.containerData,f=r.offsetWidth/e.width,h=r.offsetHeight/e.height,l=Math.abs(f-1)>Math.abs(h-1)?f:h;if(l!==1){var u,E;t.restore&&(u=this.getCanvasData(),E=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(Q(u,function(y,v){u[v]=y*l})),this.setCropBoxData(Q(E,function(y,v){E[v]=y*l})))}}},dblclick:function(){this.disabled||this.options.dragMode===je||this.setDragMode(rr(this.dragBox,Pi)?Ue:$i)},wheel:function(t){var r=this,e=Number(this.options.wheelZoomRatio)||.1,f=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){r.wheeling=!1},50),t.deltaY?f=t.deltaY>0?1:-1:t.wheelDelta?f=-t.wheelDelta/120:t.detail&&(f=t.detail>0?1:-1),this.zoom(-f*e,t)))},cropStart:function(t){var r=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(I(r)&&r!==1||I(e)&&e!==0||t.ctrlKey))){var f=this.options,h=this.pointers,l;t.changedTouches?Q(t.changedTouches,function(u){h[u.identifier]=vi(u)}):h[t.pointerId||0]=vi(t),Object.keys(h).length>1&&f.zoomable&&f.zoomOnTouch?l=We:l=Ui(t.target,li),qa.test(l)&&ti(this.element,Hi,{originalEvent:t,action:l})!==!1&&(t.preventDefault(),this.action=l,this.cropping=!1,l===ze&&(this.cropping=!0,et(this.dragBox,wi)))}},cropMove:function(t){var r=this.action;if(!(this.disabled||!r)){var e=this.pointers;t.preventDefault(),ti(this.element,zi,{originalEvent:t,action:r})!==!1&&(t.changedTouches?Q(t.changedTouches,function(f){G(e[f.identifier]||{},vi(f,!0))}):G(e[t.pointerId||0]||{},vi(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var r=this.action,e=this.pointers;t.changedTouches?Q(t.changedTouches,function(f){delete e[f.identifier]}):delete e[t.pointerId||0],r&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,Zt(this.dragBox,wi,this.cropped&&this.options.modal)),ti(this.element,Xi,{originalEvent:t,action:r}))}}},Dr={change:function(t){var r=this.options,e=this.canvasData,f=this.containerData,h=this.cropBoxData,l=this.pointers,u=this.action,E=r.aspectRatio,y=h.left,v=h.top,m=h.width,D=h.height,S=y+m,A=v+D,z=0,P=0,H=f.width,X=f.height,W=!0,ut;!E&&t.shiftKey&&(E=m&&D?m/D:1),this.limited&&(z=h.minLeft,P=h.minTop,H=z+Math.min(f.width,e.width,e.left+e.width),X=P+Math.min(f.height,e.height,e.top+e.height));var N=l[Object.keys(l)[0]],C={x:N.endX-N.startX,y:N.endY-N.startY},_=function(st){switch(st){case Wt:S+C.x>H&&(C.x=H-S);break;case Ut:y+C.x<z&&(C.x=z-y);break;case It:v+C.y<P&&(C.y=P-v);break;case Kt:A+C.y>X&&(C.y=X-A);break}};switch(u){case Gi:y+=C.x,v+=C.y;break;case Wt:if(C.x>=0&&(S>=H||E&&(v<=P||A>=X))){W=!1;break}_(Wt),m+=C.x,m<0&&(u=Ut,m=-m,y-=m),E&&(D=m/E,v+=(h.height-D)/2);break;case It:if(C.y<=0&&(v<=P||E&&(y<=z||S>=H))){W=!1;break}_(It),D-=C.y,v+=C.y,D<0&&(u=Kt,D=-D,v-=D),E&&(m=D*E,y+=(h.width-m)/2);break;case Ut:if(C.x<=0&&(y<=z||E&&(v<=P||A>=X))){W=!1;break}_(Ut),m-=C.x,y+=C.x,m<0&&(u=Wt,m=-m,y-=m),E&&(D=m/E,v+=(h.height-D)/2);break;case Kt:if(C.y>=0&&(A>=X||E&&(y<=z||S>=H))){W=!1;break}_(Kt),D+=C.y,D<0&&(u=It,D=-D,v-=D),E&&(m=D*E,y+=(h.width-m)/2);break;case ni:if(E){if(C.y<=0&&(v<=P||S>=H)){W=!1;break}_(It),D-=C.y,v+=C.y,m=D*E}else _(It),_(Wt),C.x>=0?S<H?m+=C.x:C.y<=0&&v<=P&&(W=!1):m+=C.x,C.y<=0?v>P&&(D-=C.y,v+=C.y):(D-=C.y,v+=C.y);m<0&&D<0?(u=hi,D=-D,m=-m,v-=D,y-=m):m<0?(u=oi,m=-m,y-=m):D<0&&(u=si,D=-D,v-=D);break;case oi:if(E){if(C.y<=0&&(v<=P||y<=z)){W=!1;break}_(It),D-=C.y,v+=C.y,m=D*E,y+=h.width-m}else _(It),_(Ut),C.x<=0?y>z?(m-=C.x,y+=C.x):C.y<=0&&v<=P&&(W=!1):(m-=C.x,y+=C.x),C.y<=0?v>P&&(D-=C.y,v+=C.y):(D-=C.y,v+=C.y);m<0&&D<0?(u=si,D=-D,m=-m,v-=D,y-=m):m<0?(u=ni,m=-m,y-=m):D<0&&(u=hi,D=-D,v-=D);break;case hi:if(E){if(C.x<=0&&(y<=z||A>=X)){W=!1;break}_(Ut),m-=C.x,y+=C.x,D=m/E}else _(Kt),_(Ut),C.x<=0?y>z?(m-=C.x,y+=C.x):C.y>=0&&A>=X&&(W=!1):(m-=C.x,y+=C.x),C.y>=0?A<X&&(D+=C.y):D+=C.y;m<0&&D<0?(u=ni,D=-D,m=-m,v-=D,y-=m):m<0?(u=si,m=-m,y-=m):D<0&&(u=oi,D=-D,v-=D);break;case si:if(E){if(C.x>=0&&(S>=H||A>=X)){W=!1;break}_(Wt),m+=C.x,D=m/E}else _(Kt),_(Wt),C.x>=0?S<H?m+=C.x:C.y>=0&&A>=X&&(W=!1):m+=C.x,C.y>=0?A<X&&(D+=C.y):D+=C.y;m<0&&D<0?(u=oi,D=-D,m=-m,v-=D,y-=m):m<0?(u=hi,m=-m,y-=m):D<0&&(u=ni,D=-D,v-=D);break;case He:this.move(C.x,C.y),W=!1;break;case We:this.zoom(hr(l),t),W=!1;break;case ze:if(!C.x||!C.y){W=!1;break}ut=Ke(this.cropper),y=N.startX-ut.left,v=N.startY-ut.top,m=h.minWidth,D=h.minHeight,C.x>0?u=C.y>0?si:ni:C.x<0&&(y-=m,u=C.y>0?hi:oi),C.y<0&&(v-=D),this.cropped||(Tt(this.cropBox,pt),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}W&&(h.width=m,h.height=D,h.left=y,h.top=v,this.action=u,this.renderCropBox()),Q(l,function($){$.startX=$.endX,$.startY=$.endY})}},Er={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&et(this.dragBox,wi),Tt(this.cropBox,pt),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=G({},this.initialImageData),this.canvasData=G({},this.initialCanvasData),this.cropBoxData=G({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(G(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Tt(this.dragBox,wi),et(this.cropBox,pt)),this},replace:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),r?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Q(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Tt(this.cropper,Ee)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,et(this.cropper,Ee)),this},destroy:function(){var t=this.element;return t[V]?(t[V]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,f=e.left,h=e.top;return this.moveTo(Ii(t)?t:f+Number(t),Ii(r)?r:h+Number(r))},moveTo:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,f=!1;return t=Number(t),r=Number(r),this.ready&&!this.disabled&&this.options.movable&&(I(t)&&(e.left=t,f=!0),I(r)&&(e.top=r,f=!0),f&&this.renderCanvas(!0)),this},zoom:function(t,r){var e=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(e.width*t/e.naturalWidth,null,r)},zoomTo:function(t,r,e){var f=this.options,h=this.canvasData,l=h.width,u=h.height,E=h.naturalWidth,y=h.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&f.zoomable){var v=E*t,m=y*t;if(ti(this.element,Wi,{ratio:t,oldRatio:l/E,originalEvent:e})===!1)return this;if(e){var D=this.pointers,S=Ke(this.cropper),A=D&&Object.keys(D).length?cr(D):{pageX:e.pageX,pageY:e.pageY};h.left-=(v-l)*((A.pageX-S.left-h.left)/l),h.top-=(m-u)*((A.pageY-S.top-h.top)/u)}else Qt(r)&&I(r.x)&&I(r.y)?(h.left-=(v-l)*((r.x-h.left)/l),h.top-=(m-u)*((r.y-h.top)/u)):(h.left-=(v-l)/2,h.top-=(m-u)/2);h.width=v,h.height=m,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),I(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var r=this.imageData.scaleY;return this.scale(t,I(r)?r:1)},scaleY:function(t){var r=this.imageData.scaleX;return this.scale(I(r)?r:1,t)},scale:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,f=!1;return t=Number(t),r=Number(r),this.ready&&!this.disabled&&this.options.scalable&&(I(t)&&(e.scaleX=t,f=!0),I(r)&&(e.scaleY=r,f=!0),f&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.options,e=this.imageData,f=this.canvasData,h=this.cropBoxData,l;if(this.ready&&this.cropped){l={x:h.left-f.left,y:h.top-f.top,width:h.width,height:h.height};var u=e.width/e.naturalWidth;if(Q(l,function(v,m){l[m]=v/u}),t){var E=Math.round(l.y+l.height),y=Math.round(l.x+l.width);l.x=Math.round(l.x),l.y=Math.round(l.y),l.width=y-l.x,l.height=E-l.y}}else l={x:0,y:0,width:0,height:0};return r.rotatable&&(l.rotate=e.rotate||0),r.scalable&&(l.scaleX=e.scaleX||1,l.scaleY=e.scaleY||1),l},setData:function(t){var r=this.options,e=this.imageData,f=this.canvasData,h={};if(this.ready&&!this.disabled&&Qt(t)){var l=!1;r.rotatable&&I(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,l=!0),r.scalable&&(I(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,l=!0),I(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,l=!0)),l&&this.renderCanvas(!0,!0);var u=e.width/e.naturalWidth;I(t.x)&&(h.left=t.x*u+f.left),I(t.y)&&(h.top=t.y*u+f.top),I(t.width)&&(h.width=t.width*u),I(t.height)&&(h.height=t.height*u),this.setCropBoxData(h)}return this},getContainerData:function(){return this.ready?G({},this.containerData):{}},getImageData:function(){return this.sized?G({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,r={};return this.ready&&Q(["left","top","width","height","naturalWidth","naturalHeight"],function(e){r[e]=t[e]}),r},setCanvasData:function(t){var r=this.canvasData,e=r.aspectRatio;return this.ready&&!this.disabled&&Qt(t)&&(I(t.left)&&(r.left=t.left),I(t.top)&&(r.top=t.top),I(t.width)?(r.width=t.width,r.height=t.width/e):I(t.height)&&(r.height=t.height,r.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,r;return this.ready&&this.cropped&&(r={left:t.left,top:t.top,width:t.width,height:t.height}),r||{}},setCropBoxData:function(t){var r=this.cropBoxData,e=this.options.aspectRatio,f,h;return this.ready&&this.cropped&&!this.disabled&&Qt(t)&&(I(t.left)&&(r.left=t.left),I(t.top)&&(r.top=t.top),I(t.width)&&t.width!==r.width&&(f=!0,r.width=t.width),I(t.height)&&t.height!==r.height&&(h=!0,r.height=t.height),e&&(f?r.height=r.width/e:h&&(r.width=r.height*e)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var r=this.canvasData,e=fr(this.image,this.imageData,r,t);if(!this.cropped)return e;var f=this.getData(t.rounded),h=f.x,l=f.y,u=f.width,E=f.height,y=e.width/Math.floor(r.naturalWidth);y!==1&&(h*=y,l*=y,u*=y,E*=y);var v=u/E,m=Bt({aspectRatio:v,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),D=Bt({aspectRatio:v,width:t.minWidth||0,height:t.minHeight||0},"cover"),S=Bt({aspectRatio:v,width:t.width||(y!==1?e.width:u),height:t.height||(y!==1?e.height:E)}),A=S.width,z=S.height;A=Math.min(m.width,Math.max(D.width,A)),z=Math.min(m.height,Math.max(D.height,z));var P=document.createElement("canvas"),H=P.getContext("2d");P.width=Jt(A),P.height=Jt(z),H.fillStyle=t.fillColor||"transparent",H.fillRect(0,0,A,z);var X=t.imageSmoothingEnabled,W=X===void 0?!0:X,ut=t.imageSmoothingQuality;H.imageSmoothingEnabled=W,ut&&(H.imageSmoothingQuality=ut);var N=e.width,C=e.height,_=h,$=l,st,at,ht,ct,rt,ot;_<=-u||_>N?(_=0,st=0,ht=0,rt=0):_<=0?(ht=-_,_=0,st=Math.min(N,u+_),rt=st):_<=N&&(ht=0,st=Math.min(u,N-_),rt=st),st<=0||$<=-E||$>C?($=0,at=0,ct=0,ot=0):$<=0?(ct=-$,$=0,at=Math.min(C,E+$),ot=at):$<=C&&(ct=0,at=Math.min(E,C-$),ot=at);var q=[_,$,st,at];if(rt>0&&ot>0){var gt=A/u;q.push(ht*gt,ct*gt,rt*gt,ot*gt)}return H.drawImage.apply(H,[e].concat(Xe(q.map(function(Dt){return Math.floor(Jt(Dt))})))),P},setAspectRatio:function(t){var r=this.options;return!this.disabled&&!Ii(t)&&(r.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var r=this.options,e=this.dragBox,f=this.face;if(this.ready&&!this.disabled){var h=t===$i,l=r.movable&&t===Ue;t=h||l?t:je,r.dragMode=t,fi(e,li,t),Zt(e,Pi,h),Zt(e,ki,l),r.cropBoxMovable||(fi(f,li,t),Zt(f,Pi,h),Zt(f,ki,l))}return this}},Mr=Ct.Cropper,Tr=function(){function o(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ka(this,o),!t||!Qa.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=G({},Le,Qt(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Ya(o,[{key:"init",value:function(){var r=this.element,e=r.tagName.toLowerCase(),f;if(!r[V]){if(r[V]=this,e==="img"){if(this.isImg=!0,f=r.getAttribute("src")||"",this.originalUrl=f,!f)return;f=r.src}else e==="canvas"&&window.HTMLCanvasElement&&(f=r.toDataURL());this.load(f)}}},{key:"load",value:function(r){var e=this;if(r){this.url=r,this.imageData={};var f=this.element,h=this.options;if(!h.rotatable&&!h.scalable&&(h.checkOrientation=!1),!h.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Fa.test(r)){Ka.test(r)?this.read(ur(r)):this.clone();return}var l=new XMLHttpRequest,u=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=u,l.onerror=u,l.ontimeout=u,l.onprogress=function(){l.getResponseHeader("content-type")!==Ie&&l.abort()},l.onload=function(){e.read(l.response)},l.onloadend=function(){e.reloading=!1,e.xhr=null},h.checkCrossOrigin&&_e(r)&&f.crossOrigin&&(r=Pe(r)),l.open("GET",r,!0),l.responseType="arraybuffer",l.withCredentials=f.crossOrigin==="use-credentials",l.send()}}},{key:"read",value:function(r){var e=this.options,f=this.imageData,h=mr(r),l=0,u=1,E=1;if(h>1){this.url=gr(r,Ie);var y=vr(h);l=y.rotate,u=y.scaleX,E=y.scaleY}e.rotatable&&(f.rotate=l),e.scalable&&(f.scaleX=u,f.scaleY=E),this.clone()}},{key:"clone",value:function(){var r=this.element,e=this.url,f=r.crossOrigin,h=e;this.options.checkCrossOrigin&&_e(e)&&(f||(f="anonymous"),h=Pe(e)),this.crossOrigin=f,this.crossOriginUrl=h;var l=document.createElement("img");f&&(l.crossOrigin=f),l.src=h||e,l.alt=r.alt||"The image to crop",this.image=l,l.onload=this.start.bind(this),l.onerror=this.stop.bind(this),et(l,Me),r.parentNode.insertBefore(l,r.nextSibling)}},{key:"start",value:function(){var r=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var f=Ct.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ct.navigator.userAgent),h=function(y,v){G(r.imageData,{naturalWidth:y,naturalHeight:v,aspectRatio:y/v}),r.initialImageData=G({},r.imageData),r.sizing=!1,r.sized=!0,r.build()};if(e.naturalWidth&&!f){h(e.naturalWidth,e.naturalHeight);return}var l=document.createElement("img"),u=document.body||document.documentElement;this.sizingImage=l,l.onload=function(){h(l.width,l.height),f||u.removeChild(l)},l.src=e.src,f||(l.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",u.appendChild(l))}},{key:"stop",value:function(){var r=this.image;r.onload=null,r.onerror=null,r.parentNode.removeChild(r),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var r=this.element,e=this.options,f=this.image,h=r.parentNode,l=document.createElement("div");l.innerHTML=Za;var u=l.querySelector(".".concat(V,"-container")),E=u.querySelector(".".concat(V,"-canvas")),y=u.querySelector(".".concat(V,"-drag-box")),v=u.querySelector(".".concat(V,"-crop-box")),m=v.querySelector(".".concat(V,"-face"));this.container=h,this.cropper=u,this.canvas=E,this.dragBox=y,this.cropBox=v,this.viewBox=u.querySelector(".".concat(V,"-view-box")),this.face=m,E.appendChild(f),et(r,pt),h.insertBefore(u,r.nextSibling),Tt(f,Me),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,et(v,pt),e.guides||et(v.getElementsByClassName("".concat(V,"-dashed")),pt),e.center||et(v.getElementsByClassName("".concat(V,"-center")),pt),e.background&&et(u,"".concat(V,"-bg")),e.highlight||et(m,ja),e.cropBoxMovable&&(et(m,ki),fi(m,li,Gi)),e.cropBoxResizable||(et(v.getElementsByClassName("".concat(V,"-line")),pt),et(v.getElementsByClassName("".concat(V,"-point")),pt)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),dt(e.ready)&&bt(r,Ae,e.ready,{once:!0}),ti(r,Ae)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var r=this.cropper.parentNode;r&&r.removeChild(this.cropper),Tt(this.element,pt)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Mr,o}},{key:"setDefaults",value:function(r){G(Le,Qt(r)&&r)}}])}();G(Tr.prototype,wr,br,yr,xr,Dr,Er);export{Tr as C};
