import{y as k,x as r,u as d,Q as l,F as $,bf as f,bg as I,t as m,W as o,z as a,v as u,C as p,K as _,q as x,A as U,bH as F,J as S}from"./@vue-3ecac556.js";import{B as G}from"./Authenticated-da5fe39a.js";import{H as B,L as H}from"./@inertiajs-72b4b122.js";import{h as M}from"./moment-a9aaa855.js";import{_ as b}from"./Card-aacd8da5.js";import{_ as R}from"./DialogModal-691e4667.js";import{_ as D,d as T,e as h,c as v,a as j,b as C}from"./TableRow-91ce9765.js";import{_ as P}from"./TableCaption-a02533db.js";import{C as z}from"./lucide-vue-next-214c8f72.js";import"./ApplicationLogo-fd2f7b3a.js";import"./radix-vue-0dbe0706.js";import"./@floating-ui-24f01f9d.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-ff2c9236.js";import"./clsx-0839fdbe.js";import"./app-6cbce3f4.js";import"./axios-3a665b0f.js";import"./pusher-js-b1694987.js";import"./@vueform-8c23d62f.js";import"./cropperjs-274ed722.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-4075303e.js";import"./tailwind-merge-05141ada.js";import"./@vueuse-25519c21.js";import"./@radix-icons-3edfb593.js";import"./@vuepic-e1682e24.js";import"./@babel-1b80a44a.js";import"./lodash.isequal-1ba6c16d.js";import"./vue-7c584690.js";import"./lodash.clonedeep-8ef52793.js";import"./qs-dba4bf9b.js";import"./side-channel-218a49f6.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-b36cc063.js";import"./deepmerge-89e33937.js";import"./nprogress-34327965.js";import"./DialogDescription-c92c752a.js";const O={class:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-4 gap-4"},K={class:"flex flex-col justify-end"},Y={class:"flex justify-between"},q={class:"flex flex-col justify-end"},J={class:"flex justify-between"},Q={class:"xl:col-span-2 2xl:col-span-2"},W={class:"flex flex-col 2xl:flex-row 2xl:flex-wrap gap-4"},X={class:"flex justify-between items-center"},Z={class:"flex items-center justify-end"},ee={class:"flex space-x-2"},te={class:"grid grid-cols-1 gap-4"},le={components:{Head:B,Link:H,Table:D,TableBody:T,TableCaption:P,TableCell:h,TableHead:v,TableHeader:j,TableRow:C},props:{roles:Object},data(){return{show:{add:!1},state_list:[],email_exist:!1,email_valid:!1,checking_email:!1,username_exist:!1,checking_username:!1,form:{email:"",username:"",full_name:"",country_id:"",country_code:"",calling_code:"",contact_number:"",state:"",address:"",selected_roles:[],children:[]},child_form:{name:"",gender:"",dob:""},loading:{country:!1,state:!1}}},watch:{"form.country_id":{handler(){this.form.country_id&&this.setCountryData(this.form.country_id)},immediate:!0}},methods:{checkEmail(){this.checking_email=!1,this.form.email&&(this.isValidEmail(),this.email_valid&&(this.checking_email=!0))},checkUsername(){this.checking_username=!1,this.form.username&&(this.checking_username=!0)},isValidEmail(){const i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.email_valid=i.test(this.form.email)},checkEmailExist(){axios.get("/api/find-email/"+this.form.email).then(i=>{i.data.length!=0?this.email_exist=!0:this.email_exist=!1,this.checking_email=!1})},checkUsernameExist(){axios.get("/api/find-username/"+this.form.username).then(i=>{i.data.length!=0?this.username_exist=!0:this.username_exist=!1,this.checking_username=!1})},setCountryData(i){this.loading.state=!0,axios.get(route("countries.find",i)).then(t=>{this.setStateList(t.data.country_code),this.form.calling_code=t.data.calling_code,this.form.country_name=t.data.name,this.form.country_code=t.data.country_code}).catch(t=>{this.errored=!0})},setStateList(i){var t=this.state_list;t.splice(0),axios({method:"post",url:"https://countriesnow.space/api/v0.1/countries/states",headers:{"Content-Type":"application/json"},data:{iso2:i}}).then(e=>{e.data.data.states.forEach(function(n){t.push(n.name)}),this.loading.state=!1})},clearState(){this.form.country_state=""},submit(){this.$inertia.post(route("users.store"),this.form,{preserveState:!0})},addChild(){this.form.children.push({name:this.child_form.name,gender:this.child_form.gender,dob:this.child_form.dob}),this.child_form.name="",this.child_form.gender="",this.child_form.dob="",this.show.add=!1},deleteChild(i){this.form.children.splice(i,1)},hasPermission(i){return this.$page.props.can.hasOwnProperty(i)&&this.$page.props.can[i]},verifyChecked(i){return this.form.selected_roles.includes(i)}}},Xe=Object.assign(le,{__name:"Create",setup(i){return(t,e)=>{const n=f("Label"),y=f("Input"),V=f("ComboBox"),N=f("Textarea"),L=f("Checkbox"),g=f("Button"),A=f("Datepicker"),w=I("debounce");return m(),k($,null,[r(d(B),{title:"Users"}),r(G,null,{header:l(()=>e[19]||(e[19]=[])),default:l(()=>[r(b,null,{title:l(()=>e[20]||(e[20]=[o("User Information")])),content:l(()=>[a("div",O,[a("div",K,[a("div",Y,[r(n,null,{default:l(()=>e[21]||(e[21]=[o("Email"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[21]}),t.checking_email?(m(),u(n,{key:0,class:"text-xs font-medium text-indigo-600"},{default:l(()=>e[22]||(e[22]=[o(" Checking Email...")])),_:1,__:[22]})):p("",!0),t.form.email!=""&!t.email_valid?(m(),u(n,{key:1,class:"text-xs font-medium text-red-600"},{default:l(()=>e[23]||(e[23]=[o(" Invalid Email ")])),_:1,__:[23]})):p("",!0),!t.checking_email&&t.form.email!=""&t.email_valid?(m(),u(n,{key:2,class:x(["text-xs font-medium",t.email_exist?"text-red-700":"text-green-700"])},{default:l(()=>[o(_(t.email_exist?"Email address has been used.":"Email address is available."),1)]),_:1},8,["class"])):p("",!0)]),U(r(y,{class:"mt-0.5",type:"email",error:t.$page.props.errors.email,modelValue:t.form.email,"onUpdate:modelValue":e[0]||(e[0]=s=>t.form.email=s),onKeyup:e[1]||(e[1]=s=>t.checkEmail())},null,8,["error","modelValue"]),[[w,t.checkEmailExist,"800ms"]])]),a("div",q,[a("div",J,[r(n,null,{default:l(()=>e[24]||(e[24]=[o("Username"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[24]}),t.checking_username?(m(),u(n,{key:0,class:"text-xs font-medium text-indigo-600"},{default:l(()=>e[25]||(e[25]=[o(" Checking Username...")])),_:1,__:[25]})):p("",!0),!t.checking_username&&t.form.username!=""?(m(),u(n,{key:1,class:x(["text-xs font-medium",t.username_exist?"text-red-700":"text-green-700"])},{default:l(()=>[o(_(t.username_exist?"Username has been taken.":"Username is available."),1)]),_:1},8,["class"])):p("",!0)]),U(r(y,{class:"mt-0.5",type:"text",error:t.$page.props.errors.username,modelValue:t.form.username,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.username=s),onKeyup:e[3]||(e[3]=s=>t.checkUsername())},null,8,["error","modelValue"]),[[w,t.checkUsernameExist,"800ms"]])]),a("div",null,[r(n,null,{default:l(()=>e[26]||(e[26]=[o("Full Name"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[26]}),r(y,{type:"text",error:t.$page.props.errors.full_name,modelValue:t.form.full_name,"onUpdate:modelValue":e[4]||(e[4]=s=>t.form.full_name=s)},null,8,["error","modelValue"])]),a("div",null,[r(n,null,{default:l(()=>e[27]||(e[27]=[o("Country"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[27]}),r(V,{items:t.$page.props.countries,"label-property":"name","value-property":"id",error:t.$page.props.errors.country_id,modelValue:t.form.country_id,"onUpdate:modelValue":e[5]||(e[5]=s=>t.form.country_id=s),"select-placeholder":"Select Country","search-placeholder":"Search country...",onSelect:e[6]||(e[6]=s=>t.clearState())},null,8,["items","error","modelValue"]),U(a("input",{type:"hidden","onUpdate:modelValue":e[7]||(e[7]=s=>t.form.country=s)},null,512),[[F,t.form.country]])]),a("div",null,[r(n,null,{default:l(()=>e[28]||(e[28]=[o("State"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[28]}),r(V,{items:t.state_list,"label-property":"name","value-property":"id",error:t.$page.props.errors.country_state,modelValue:t.form.country_state,"onUpdate:modelValue":e[8]||(e[8]=s=>t.form.country_state=s),"select-placeholder":"Select State","search-placeholder":"Search state...",loading:t.loading.state},null,8,["items","error","modelValue","loading"])]),a("div",Q,[r(n,null,{default:l(()=>e[29]||(e[29]=[o("Address"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[29]}),r(N,{type:"text",error:t.$page.props.errors.address,modelValue:t.form.address,"onUpdate:modelValue":e[9]||(e[9]=s=>t.form.address=s)},null,8,["error","modelValue"])]),a("div",null,[r(n,null,{default:l(()=>e[30]||(e[30]=[o("Contact Number"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[30]}),r(y,{type:"number",inputGroup:t.form.calling_code,error:t.$page.props.errors.contact_number,modelValue:t.form.contact_number,"onUpdate:modelValue":e[10]||(e[10]=s=>t.form.contact_number=s)},null,8,["inputGroup","error","modelValue"])])])]),_:1}),t.$page.props.can.view_user_roles?(m(),u(b,{key:0},{title:l(()=>e[31]||(e[31]=[o("Roles Information")])),content:l(()=>[a("div",W,[(m(!0),k($,null,S(i.roles,s=>(m(),k("div",{key:s.id},[t.hasPermission(s.permission)?(m(),u(n,{key:0,id:s.id,class:"flex items-center space-x-1 cursor-pointer"},{default:l(()=>[r(L,{class:"mr-1",id:s.id,value:s.id,checked:t.verifyChecked(s.id),modelValue:t.form.selected_roles,"onUpdate:modelValue":e[11]||(e[11]=c=>t.form.selected_roles=c)},null,8,["id","value","checked","modelValue"]),o(" "+_(s.display_name),1)]),_:2},1032,["id"])):p("",!0)]))),128))])]),_:1})):p("",!0),t.$page.props.can.create_child||t.$page.props.can.view_child?(m(),u(b,{key:1},{title:l(()=>[a("div",X,[e[33]||(e[33]=o(" Children Information ")),t.$page.props.can.create_child?(m(),u(g,{key:0,onClick:e[12]||(e[12]=s=>t.show.add=!0)},{default:l(()=>[r(d(z),{class:"h-4 w-4"}),e[32]||(e[32]=a("span",{class:"ml-1 hidden sm:block"},"Add Child",-1))]),_:1,__:[32]})):p("",!0)])]),content:l(()=>[t.$page.props.can.view_child?(m(),u(d(D),{key:0,class:"px-4"},{default:l(()=>[r(d(j),{class:"bg-gray-100"},{default:l(()=>[r(d(C),null,{default:l(()=>[r(d(v),{class:"px-4"},{default:l(()=>e[34]||(e[34]=[o("Name")])),_:1,__:[34]}),r(d(v),null,{default:l(()=>e[35]||(e[35]=[o("Gender")])),_:1,__:[35]}),r(d(v),null,{default:l(()=>e[36]||(e[36]=[o("Date of Birth")])),_:1,__:[36]}),r(d(v),{class:"text-center"},{default:l(()=>e[37]||(e[37]=[o("Action")])),_:1,__:[37]})]),_:1})]),_:1}),r(d(T),null,{default:l(()=>[t.form.children.length?p("",!0):(m(),u(d(C),{key:0},{default:l(()=>[r(d(h),{class:"text-center",colspan:"10"},{default:l(()=>e[38]||(e[38]=[a("div",{class:"p-3"}," No Record Found ",-1)])),_:1,__:[38]})]),_:1})),(m(!0),k($,null,S(t.form.children,(s,c)=>(m(),u(d(C),null,{default:l(()=>[r(d(h),{class:"px-4"},{default:l(()=>[o(_(s.name),1)]),_:2},1024),r(d(h),null,{default:l(()=>[o(_(t.$page.props.gender_list.find(E=>E.id==s.gender).name),1)]),_:2},1024),r(d(h),null,{default:l(()=>[o(_(d(M)(s.dob).format("DD/MM/Y")),1)]),_:2},1024),r(d(h),{class:"text-center"},{default:l(()=>[r(g,{variant:"destructive",onClick:E=>t.deleteChild(c)},{default:l(()=>e[39]||(e[39]=[o("Delete")])),_:2,__:[39]},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})):p("",!0)]),_:1})):p("",!0),r(b,null,{content:l(()=>[a("div",Z,[a("div",ee,[r(g,{variant:"outline",onClick:e[13]||(e[13]=s=>t.$inertia.get(t.route("users")))},{default:l(()=>e[40]||(e[40]=[o("Cancel")])),_:1,__:[40]}),r(g,{onClick:t.submit},{default:l(()=>e[41]||(e[41]=[o("Register")])),_:1,__:[41]},8,["onClick"])])])]),_:1}),r(R,{open:t.show.add,"onUpdate:open":e[18]||(e[18]=s=>t.show.add=s)},{title:l(()=>e[42]||(e[42]=[o("Add Child")])),content:l(()=>[a("div",te,[a("div",null,[r(n,null,{default:l(()=>e[43]||(e[43]=[o("Full Name"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[43]}),r(y,{type:"text",error:t.$page.props.errors.child_name,modelValue:t.child_form.name,"onUpdate:modelValue":e[14]||(e[14]=s=>t.child_form.name=s)},null,8,["error","modelValue"])]),a("div",null,[r(n,null,{default:l(()=>e[44]||(e[44]=[o("Gender"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[44]}),r(V,{items:t.$page.props.gender_list,"label-property":"name","value-property":"id",error:t.$page.props.errors.gender,modelValue:t.child_form.gender,"onUpdate:modelValue":e[15]||(e[15]=s=>t.child_form.gender=s),"select-placeholder":"Select Gender","search-placeholder":"Search gender..."},null,8,["items","error","modelValue"])]),a("div",null,[r(n,{id:"dob"},{default:l(()=>e[45]||(e[45]=[o("Date of Birth"),a("span",{class:"text-red-500"},"*",-1)])),_:1,__:[45]}),r(A,{mode:"date",format:"dd/MM/Y",teleport:"#dob",teleportCenter:!0,modelValue:t.child_form.dob,"onUpdate:modelValue":e[16]||(e[16]=s=>t.child_form.dob=s)},null,8,["modelValue"])])])]),footer:l(()=>[r(g,{variant:"outline",onClick:e[17]||(e[17]=s=>t.show.add=!1)},{default:l(()=>e[46]||(e[46]=[o("Cancel")])),_:1,__:[46]}),r(g,{onClick:t.addChild},{default:l(()=>e[47]||(e[47]=[o("Add")])),_:1,__:[47]},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{Xe as default};
