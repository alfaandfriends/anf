import{B as M}from"./Authenticated-da5fe39a.js";import{H as B,L as N}from"./@inertiajs-72b4b122.js";import{e as w}from"./vue-debounce-ed417ae1.js";import{_ as $}from"./Card-aacd8da5.js";import{_ as R}from"./DialogModal-691e4667.js";import{_ as q}from"./Collapsible-5a7db4b8.js";import{_ as T,d as j,e as f,c,a as A,b as S}from"./TableRow-91ce9765.js";import{_ as H}from"./TableCaption-a02533db.js";import{C as D}from"./lucide-vue-next-214c8f72.js";import{y as m,x as t,u as d,Q as o,F as g,bf as b,t as u,W as s,z as i,P as z,J as C,v as F,K as _,C as U}from"./@vue-3ecac556.js";import"./ApplicationLogo-fd2f7b3a.js";import"./radix-vue-0dbe0706.js";import"./@floating-ui-24f01f9d.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-ff2c9236.js";import"./clsx-0839fdbe.js";import"./app-6cbce3f4.js";import"./axios-3a665b0f.js";import"./pusher-js-b1694987.js";import"./@vueform-8c23d62f.js";import"./cropperjs-274ed722.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./v-calendar-4075303e.js";import"./tailwind-merge-05141ada.js";import"./@vueuse-25519c21.js";import"./@radix-icons-3edfb593.js";import"./@vuepic-e1682e24.js";import"./@babel-1b80a44a.js";import"./lodash.isequal-1ba6c16d.js";import"./vue-7c584690.js";import"./lodash.clonedeep-8ef52793.js";import"./qs-dba4bf9b.js";import"./side-channel-218a49f6.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-b36cc063.js";import"./deepmerge-89e33937.js";import"./nprogress-34327965.js";import"./DialogDescription-c92c752a.js";const E={class:"grid grid-cols-1 2xl:grid-cols-3 gap-4"},J={class:"flex justify-between items-center"},K={class:"flex"},Q={class:"text-sm text-gray-700"},W={class:"font-semibold"},Y={class:"flex flex-col"},G={class:"text-sm text-gray-700 font-normal underline"},X={class:"font-semibold"},Z={class:"text-sm text-gray-700 italic"},x={class:"font-semibold"},ee={class:"text-sm text-gray-700 italic"},re={class:"font-semibold"},te={class:"flex items-center justify-between"},oe={class:"flex space-x-2 items-center"},ie={class:"flex space-x-2"},ae={class:"p-1 grid grid-cols-1 gap-4"},se={class:"p-1 grid grid-cols-1 gap-4"},le={key:0},de={key:1},ne={components:{Head:B,Link:N,Table:T,TableBody:j,TableCaption:H,TableCell:f,TableHead:c,TableHeader:A,TableRow:S},data(){return{levels:Array.from({length:10},(l,r)=>({id:r+1,name:`Level ${r+1}`})),collapsible:{fee:!0,material:!1},form:{programme_name:"",programme_country:"",programme_info:[],progress_report_required:0,programme_active:!0},fee_form:{level:"",registration_fee:0,material_fee:0,class_type:"",fees:[]},show:{add_fee:!1,product_variations:!1,product_sub_variations:!1,add_tracking_status:!1},list:{products:[],product_variations:[],product_sub_variations:[],class_types_detail:[]},loading:{products:!1,product_variations:!1,product_sub_variations:!1},selected:{product:[],product_variation:[],product_sub_variation:[]},search_product_form:{product_id:"",product_variation_id:"",product_sub_variation_id:""},validation:{level:{required:!0,error:!1},registration_fee:{required:!0,error:!1},material_fee:{required:!0,error:!1},class_type:{required:!0,error:!1},product:{required:!1,error:!1},product_variation:{required:!1,error:!1},product_sub_variation:{required:!1,error:!1}}}},watch:{"fee_form.class_type":{handler(){this.list.class_types_detail=[],this.fee_form.fees=[],this.$page.props.class_types_detail.forEach(l=>{l.class_type_id==this.fee_form.class_type&&(this.list.class_types_detail.push(l),this.fee_form.fees.push({class_type_detail_id:l.id,value:1}))})},deep:!0},"search_product_form.product_id":{handler(){this.search_product_form.product_id&&(this.selected.product=this.list.products.find(l=>l.id===this.search_product_form.product_id),this.show.product_variations=this.selected.product.has_variation==1,this.show.product_sub_variations=this.selected.product.has_sub_variation==1,this.search_product_form.product_variation_id="",this.search_product_form.product_sub_variation_id="",this.selected.product_variation=[],this.selected.product_sub_variation=[])}},"search_product_form.product_variation_id":{handler(){this.search_product_form.product_variation_id&&(this.selected.product_variation=this.list.product_variations.find(l=>l.id===this.search_product_form.product_variation_id),this.search_product_form.product_sub_variation_id="",this.selected.product_sub_variation=[])}},"search_product_form.product_sub_variation_id":{handler(){this.search_product_form.product_sub_variation_id&&(this.selected.product_sub_variation=this.list.product_sub_variations.find(l=>l.id===this.search_product_form.product_sub_variation_id))}}},computed:{groupedItems(){return this.form.programme_info.reduce((l,r)=>(l[r.level]||(l[r.level]=[]),l[r.level].push(r),l),{})}},methods:{submit(){this.$inertia.post(route("programmes.store"),this.form)},showAddFee(){this.search_product_form.product_id="",this.search_product_form.product_variation_id="",this.search_product_form.product_sub_variation_id="",this.list.products=[],this.list.product_variations=[],this.list.product_sub_variations=[],this.selected.product=[],this.selected.product_variation=[],this.selected.product_sub_variation=[],this.show.product_variations=!1,this.show.product_sub_variations=!1,this.validation.product.error=!1,this.validation.product_variation.required=!1,this.validation.product_variation.error=!1,this.validation.product_sub_variation.required=!1,this.validation.product_sub_variation.error=!1,this.show.add_fee=!0},addFee(){if(this.validation.level.error=this.fee_form.level==="",this.validation.registration_fee.error=this.fee_form.registration_fee==="",this.validation.material_fee.error=this.fee_form.material_fee==="",this.validation.class_type.error=this.fee_form.class_type==="",this.validation.product.error=!!(this.validation.product.required&&!Object.keys(this.selected.product).length),this.validation.product_variation.required=this.selected.product.has_variation==1,this.validation.product_variation.error=this.selected.product.has_variation==1&&!Object.keys(this.selected.product_variation).length,this.validation.product_sub_variation.required=this.selected.product.has_sub_variation==1,this.validation.product_sub_variation.error=this.selected.product.has_sub_variation==1&&!Object.keys(this.selected.product_sub_variation).length,this.validation.product.required&&!Object.keys(this.selected.product).length||this.validation.product_variation.required&&!Object.keys(this.selected.product_variation).length||this.validation.product_sub_variation.required&&!Object.keys(this.selected.product_sub_variation).length||this.fee_form.level==""||this.fee_form.registration_fee===""||this.fee_form.material_fee===""||this.fee_form.class_type==""||this.fee_form.fees.length<1)return;const l=this.fee_form.fees;this.form.programme_info.push({level:this.fee_form.level,registration_fee:this.fee_form.registration_fee,material_fee:this.fee_form.material_fee,class_type:this.fee_form.class_type,fees:l,product:this.selected.product,product_variation:this.selected.product_variation,product_sub_variation:this.selected.product_sub_variation}),this.form.programme_info.sort((r,e)=>r.level-e.level),this.clearForm(),this.show.add_fee=!1},deleteLevel(l){this.form.programme_info.splice(l,1)},numbersOnly(l){l=l||window.event;var r=l.which?l.which:l.keyCode;if(r>31&&(r<48||r>57)&&r!==46)l.preventDefault();else return!0},clearForm(){this.fee_form.level="",this.fee_form.registration_fee=0,this.fee_form.material_fee=0,this.fee_form.class_type="",this.fee_form.fees=[]},findProducts:w(function(l){l&&(this.loading.products=!0,axios.get(route("products.find_products"),{params:{keyword:l}}).then(r=>{this.list.products=r.data,this.loading.products=!1}))},1e3),findProductVariations:w(function(l){this.loading.product_variations=!0,axios.get(route("products.find_product_variations"),{params:{product_id:this.search_product_form.product_id}}).then(r=>{this.list.product_variations=r.data,this.loading.product_variations=!1})},1e3),findProductSubVariations:w(function(l){this.loading.product_sub_variations=!0,axios.get(route("products.find_product_sub_variations"),{params:{product_variation_id:this.search_product_form.product_variation_id}}).then(r=>{this.list.product_sub_variations=r.data,this.loading.product_sub_variations=!1})},1e3)}},ar=Object.assign(ne,{__name:"Create",setup(l){return(r,e)=>{const n=b("Label"),y=b("Input"),v=b("ComboBox"),h=b("Button"),O=b("Switch");return u(),m(g,null,[t(d(B),{title:"Programmes"}),t(M,null,{header:o(()=>e[16]||(e[16]=[])),default:o(()=>[t($,null,{title:o(()=>e[17]||(e[17]=[s("Programme Information")])),content:o(()=>[i("div",E,[i("div",null,[t(n,null,{default:o(()=>e[18]||(e[18]=[s("Name"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[18]}),t(y,{type:"text",error:r.$page.props.errors.programme_name,modelValue:r.form.programme_name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.form.programme_name=a)},null,8,["error","modelValue"])]),i("div",null,[t(n,null,{default:o(()=>e[19]||(e[19]=[s("Country"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[19]}),t(v,{items:r.$page.props.countries,"label-property":"name","value-property":"id",error:r.$page.props.errors.programme_country,modelValue:r.form.programme_country,"onUpdate:modelValue":e[1]||(e[1]=a=>r.form.programme_country=a),"select-placeholder":"Select Country","search-placeholder":"Search country..."},null,8,["items","error","modelValue"])]),i("div",null,[t(n,null,{default:o(()=>e[20]||(e[20]=[s("Progress Report Required"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[20]}),t(v,{items:[{id:0,name:"No"},{id:1,name:"Yes"}],"label-property":"name","value-property":"id",error:r.$page.props.errors.progress_report_required,modelValue:r.form.progress_report_required,"onUpdate:modelValue":e[2]||(e[2]=a=>r.form.progress_report_required=a),"select-placeholder":"Please Select","search-placeholder":"Search..."},null,8,["error","modelValue"])])])]),_:1}),t($,null,z({title:o(()=>[i("div",J,[e[22]||(e[22]=s(" Programmes Levels & Fees ")),t(h,{onClick:r.showAddFee},{default:o(()=>[t(d(D),{class:"h-4 w-4"}),e[21]||(e[21]=i("span",{class:"ml-1 hidden sm:block"},"Add",-1))]),_:1,__:[21]},8,["onClick"])])]),_:2},[r.form.programme_info.length?{name:"content",fn:o(()=>[(u(!0),m(g,null,C(r.groupedItems,(a,V)=>(u(),F(q,null,{trigger:o(()=>[s("Level "+_(V),1)]),content:o(()=>[t(d(T),{class:"px-4"},{default:o(()=>[t(d(A),{class:"bg-gray-100"},{default:o(()=>[t(d(S),null,{default:o(()=>[t(d(c),{class:"px-4"},{default:o(()=>e[23]||(e[23]=[s("Class Type")])),_:1,__:[23]}),t(d(c),null,{default:o(()=>e[24]||(e[24]=[s("Registration Fee")])),_:1,__:[24]}),t(d(c),null,{default:o(()=>e[25]||(e[25]=[s("Material Fee")])),_:1,__:[25]}),t(d(c),null,{default:o(()=>e[26]||(e[26]=[s("Monthly Fee")])),_:1,__:[26]}),t(d(c),null,{default:o(()=>e[27]||(e[27]=[s("Material")])),_:1,__:[27]}),t(d(c),{class:"text-center"},{default:o(()=>e[28]||(e[28]=[s("Action")])),_:1,__:[28]})]),_:1})]),_:1}),t(d(j),null,{default:o(()=>[a.length?U("",!0):(u(),F(d(S),{key:0},{default:o(()=>[t(d(f),{class:"text-center",colspan:"10"},{default:o(()=>e[29]||(e[29]=[i("div",{class:"p-3"}," No Record Found ",-1)])),_:1,__:[29]})]),_:1})),(u(!0),m(g,null,C(a,(p,L)=>(u(),F(d(S),null,{default:o(()=>[t(d(f),{class:"px-4"},{default:o(()=>[s(_(r.$page.props.class_types[a[L].class_type].name),1)]),_:2},1024),t(d(f),null,{default:o(()=>[s(_(p.registration_fee),1)]),_:2},1024),t(d(f),null,{default:o(()=>[s(_(p.material_fee),1)]),_:2},1024),t(d(f),null,{default:o(()=>[(u(!0),m(g,null,C(p.fees,k=>{var P;return u(),m("div",K,[i("p",Q,[s(_((P=r.$page.props.class_types_detail.find(I=>I.id===k.class_type_detail_id))==null?void 0:P.label)+" : ",1),i("span",W,_(k.value),1)])])}),256))]),_:2},1024),t(d(f),null,{default:o(()=>[i("div",Y,[i("p",G,[i("span",X,_(p.product.name),1)]),i("p",Z,[e[30]||(e[30]=s("Variation : ")),i("span",x,_(p.product_variation.option_name?p.product_variation.option_name:"-"),1)]),i("p",ee,[e[31]||(e[31]=s("Sub Variation : ")),i("span",re,_(p.product_sub_variation.option_name?p.product_sub_variation.option_name:"-"),1)])])]),_:2},1024),t(d(f),{class:"text-center"},{default:o(()=>[t(h,{variant:"destructive",onClick:k=>r.deleteLevel(L)},{default:o(()=>e[32]||(e[32]=[s("Delete")])),_:2,__:[32]},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),key:"0"}:void 0]),1024),t($,null,{content:o(()=>[i("div",te,[i("div",oe,[t(n,null,{default:o(()=>e[33]||(e[33]=[s("Active")])),_:1,__:[33]}),t(O,{modelValue:r.form.programme_active,"onUpdate:modelValue":e[3]||(e[3]=a=>r.form.programme_active=a)},null,8,["modelValue"])]),i("div",ie,[t(h,{variant:"outline",onClick:e[4]||(e[4]=a=>r.$inertia.get(r.route("programmes")))},{default:o(()=>e[34]||(e[34]=[s("Cancel")])),_:1,__:[34]}),t(h,{onClick:r.submit},{default:o(()=>e[35]||(e[35]=[s("Save")])),_:1,__:[35]},8,["onClick"])])])]),_:1}),t(R,{open:r.show.add_fee,"onUpdate:open":e[15]||(e[15]=a=>r.show.add_fee=a)},{title:o(()=>e[36]||(e[36]=[s("Add Fee")])),content:o(()=>[t(q,{modelValue:r.collapsible.fee,"onUpdate:modelValue":e[9]||(e[9]=a=>r.collapsible.fee=a)},{trigger:o(()=>e[37]||(e[37]=[s("Fee Information")])),content:o(()=>[i("div",ae,[i("div",null,[t(n,null,{default:o(()=>e[38]||(e[38]=[s("Level"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[38]}),t(v,{items:r.levels,"label-property":"name","value-property":"id",error:r.validation.level.error,modelValue:r.fee_form.level,"onUpdate:modelValue":e[5]||(e[5]=a=>r.fee_form.level=a),"select-placeholder":"Select Level","search-placeholder":"Search level..."},null,8,["items","error","modelValue"])]),i("div",null,[t(n,null,{default:o(()=>e[39]||(e[39]=[s("Registration Fee"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[39]}),t(y,{type:"number",error:r.validation.registration_fee.error,modelValue:r.fee_form.registration_fee,"onUpdate:modelValue":e[6]||(e[6]=a=>r.fee_form.registration_fee=a)},null,8,["error","modelValue"])]),i("div",null,[t(n,null,{default:o(()=>e[40]||(e[40]=[s("Material Fee"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[40]}),t(y,{type:"number",error:r.validation.material_fee.error,modelValue:r.fee_form.material_fee,"onUpdate:modelValue":e[7]||(e[7]=a=>r.fee_form.material_fee=a)},null,8,["error","modelValue"])]),i("div",null,[t(n,null,{default:o(()=>e[41]||(e[41]=[s("Class Type"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[41]}),t(v,{items:Object.values(r.$page.props.class_types),"label-property":"name","value-property":"id",error:r.validation.class_type.error,modelValue:r.fee_form.class_type,"onUpdate:modelValue":e[8]||(e[8]=a=>r.fee_form.class_type=a),"select-placeholder":"Select Class Type","search-placeholder":"Search class type..."},null,8,["items","error","modelValue"])]),(u(!0),m(g,null,C(r.list.class_types_detail,(a,V)=>(u(),m("div",null,[t(n,null,{default:o(()=>[s(_(a.label),1),e[42]||(e[42]=i("span",{class:"text-red-500"},"*",-1))]),_:2,__:[42]},1024),t(y,{type:"number",min:"1",error:r.$page.props.errors.class_type_detail,modelValue:r.fee_form.fees[V].value,"onUpdate:modelValue":p=>r.fee_form.fees[V].value=p},null,8,["error","modelValue","onUpdate:modelValue"])]))),256))])]),_:1},8,["modelValue"]),t(q,{modelValue:r.collapsible.material,"onUpdate:modelValue":e[13]||(e[13]=a=>r.collapsible.material=a)},{trigger:o(()=>e[43]||(e[43]=[s("Material Information")])),content:o(()=>[i("div",se,[i("div",null,[t(n,null,{default:o(()=>e[44]||(e[44]=[s("Material")])),_:1,__:[44]}),t(v,{items:r.list.products,"label-property":"name","value-property":"id",error:r.validation.product.error,loading:r.loading.products,onSearch:r.findProducts,onSelect:r.findProductVariations,modelValue:r.search_product_form.product_id,"onUpdate:modelValue":e[10]||(e[10]=a=>r.search_product_form.product_id=a),"select-placeholder":"Select Material","search-placeholder":"Search material..."},null,8,["items","error","loading","onSearch","onSelect","modelValue"])]),r.show.product_variations?(u(),m("div",le,[t(n,null,{default:o(()=>e[45]||(e[45]=[s("Variation"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[45]}),t(v,{items:r.list.product_variations,"label-property":"option_name","value-property":"id",loading:r.loading.product_variations,error:r.validation.product_variation.error,onSelect:r.findProductSubVariations,modelValue:r.search_product_form.product_variation_id,"onUpdate:modelValue":e[11]||(e[11]=a=>r.search_product_form.product_variation_id=a),"select-placeholder":"Select Variation","search-placeholder":"Search variation..."},null,8,["items","loading","error","onSelect","modelValue"])])):U("",!0),r.show.product_sub_variations?(u(),m("div",de,[t(n,null,{default:o(()=>e[46]||(e[46]=[s("Sub Variation"),i("span",{class:"text-red-500"},"*",-1)])),_:1,__:[46]}),t(v,{items:r.list.product_sub_variations,"label-property":"option_name","value-property":"id",loading:r.loading.product_sub_variations,error:r.validation.product_sub_variation.error,modelValue:r.search_product_form.product_sub_variation_id,"onUpdate:modelValue":e[12]||(e[12]=a=>r.search_product_form.product_sub_variation_id=a),"select-placeholder":"Select Sub Variation","search-placeholder":"Search sub variation..."},null,8,["items","loading","error","modelValue"])])):U("",!0)])]),_:1},8,["modelValue"])]),footer:o(()=>[t(h,{variant:"outline",onClick:e[14]||(e[14]=a=>r.show.add_fee=!1)},{default:o(()=>e[47]||(e[47]=[s("Cancel")])),_:1,__:[47]}),t(h,{onClick:r.addFee},{default:o(()=>e[48]||(e[48]=[s("Add")])),_:1,__:[48]},8,["onClick"])]),_:1},8,["open"])]),_:1})],64)}}});export{ar as default};
