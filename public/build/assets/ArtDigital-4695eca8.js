import{y as c,x as s,u as p,Q as o,F as b,bf as k,t as _,W as a,v as V,z as l,C as j,J as q,K as v,q as T,Y as O,A as P,I as R}from"./@vue-3ecac556.js";import{B}from"./Authenticated-da5fe39a.js";import{H as N,L as D}from"./@inertiajs-72b4b122.js";import M from"./StudentInformation-f4e38f93.js";import{h as E}from"./moment-a9aaa855.js";import{a as y}from"./axios-3a665b0f.js";import J from"./FeedbackSummary-d528812a.js";import{e as z}from"./vue-debounce-ed417ae1.js";import{_ as Q}from"./Card-aacd8da5.js";import{_ as W,a as F,b as U,c as C,d as G,e as w}from"./TableRow-91ce9765.js";import{_ as I}from"./DialogModal-691e4667.js";import{_ as H}from"./Collapsible-5a7db4b8.js";import{_ as L}from"./index-803c4a9c.js";import{e as K,f as Y,g as X}from"./app-6cbce3f4.js";import{P as Z,a as x,W as ee}from"./lucide-vue-next-214c8f72.js";import"./ApplicationLogo-fd2f7b3a.js";import"./radix-vue-0dbe0706.js";import"./@floating-ui-24f01f9d.js";import"./@internationalized-2f03b566.js";import"./class-variance-authority-ff2c9236.js";import"./clsx-0839fdbe.js";import"./@radix-icons-3edfb593.js";import"./DialogDescription-c92c752a.js";import"./lodash.isequal-1ba6c16d.js";import"./vue-7c584690.js";import"./lodash.clonedeep-8ef52793.js";import"./qs-dba4bf9b.js";import"./side-channel-218a49f6.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-b36cc063.js";import"./deepmerge-89e33937.js";import"./nprogress-34327965.js";import"./pusher-js-b1694987.js";import"./@vueform-8c23d62f.js";import"./cropperjs-274ed722.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./v-calendar-4075303e.js";import"./tailwind-merge-05141ada.js";import"./@vueuse-25519c21.js";import"./@vuepic-e1682e24.js";import"./@babel-1b80a44a.js";const te={class:"p-1 grid grid-cols-1 gap-4"},se={class:""},oe={class:"mb-3"},re={class:""},ie={class:""},ae={class:""},le={class:""},ne={key:0,class:"px-4 py-2 bg-slate-100 rounded-lg"},de={class:"flex items-center space-x-2"},me={class:"p-1"},pe={class:"flex flex-col space-y-1"},ue={class:"pt-3 divide-y"},_e={class:""},fe={class:"cursor-pointer"},he={class:"flex flex-wrap justify-center md:justify-start gap-4 mt-3"},ce={class:"flex flex-col space-y-2 items-center"},ge=["onClickPassive"],ve=["onChange"],ye={class:"flex flex-col items-center relative"},be=["src","alt","onClick"],ke={class:"flex items-center space-x-1 mt-2"},we={class:""},$e={class:"flex justify-between items-center mb-2"},Se={class:"flex items-center"},Ce={key:0,class:"text-xs"},Ve={class:"flex flex-col gap-2"},qe={class:"relative"},Te={class:""},Ae={class:"p-1 grid grid-cols-1 items-center gap-2"},je={key:1,class:"flex flex-col items-center"},Ue=["innerHTML"],Ie={components:{Head:N,Link:D},computed:{groupedData(){return this.form.report_data.reduce((r,e)=>{let t=r.find(u=>u.theme_id===e.theme_id);t||(t={theme_id:e.theme_id,theme_name:e.theme_name,lessons:[]},r.push(t));let d=t.lessons.find(u=>u.lesson_id===e.lesson_id);d||(d={lesson_id:e.lesson_id,lesson_name:e.lesson_name,activities:[]},t.lessons.push(d));let n=d.activities.find(u=>u.activity_id===e.activity_id);n||(n={activity_id:e.activity_id,activity_name:e.activity_name,outcomes:[]},d.activities.push(n));let h=n.outcomes.find(u=>u.outcome_id===e.outcome_id);return h||(h={outcome_id:e.outcome_id,outcome_name:e.outcome_name},n.outcomes.push(h)),h.objectives=e.objectives,r},[])}},data(){return{open_prompt:!1,selected_text:"",additional_inputs:"",generating:{comments:!1},improving_comment:!1,show_select_student:!1,show_qr_modal:!1,show_progress_report:!1,open_objectives:[],searching:!1,progress_report_list:{},qr_data:{report_detail_id:"",student_id:"",theme_id:"",lesson_id:"",activity_id:"",image:""},disabled:{themes:!0,lessons:!0,activities:!0,outcomes:!0},list:{teachers:[],students:[],artworks:[]},options:{themes:[],lessons:[],activities:[],outcomes:[],objectives:[]},loading:{themes:!1,lessons:!1,activities:!1,outcomes:!1,teachers:!1},search:{theme_id:"",lesson_id:"",activity_id:"",outcome_id:""},form:{student_id:"",student_level:"",teacher_user_id:"",date:"",report_data:[],comments:"",attendance_status:"",file_to_delete:[]}}},methods:{viewProgressReport(r){this.clearSearch(),y.get(route("progress_report.artworks"),{params:{report_detail_id:this.$page.props.progress_reports[r].id}}).then(e=>{this.list.artworks=e.data,this.form.student_id=this.$page.props.student_info.id,this.form.student_level=this.$page.props.student_info.level,this.form.report_id=this.$page.props.progress_reports[r].id,this.form.teacher_user_id=this.$page.props.progress_reports[r].teacher_user_id,this.form.teacher_name=this.$page.props.progress_reports[r].display_name,this.form.date=this.$page.props.progress_reports[r].date,this.form.report_data=JSON.parse(this.$page.props.progress_reports[r].report_data)?JSON.parse(this.$page.props.progress_reports[r].report_data):[],this.form.attendance_status=this.$page.props.progress_reports[r].attendance_status,this.form.comments=this.$page.props.progress_reports[r].comments,this.form.file_to_delete=[],this.show_progress_report=!0})},updateProgressReport(){!this.form.date||this.form.attendance_status==3||this.form.attendance_status==1&&this.form.report_data.length<1||this.form.attendance_status==1&&!this.form.teacher_user_id||this.$inertia.post(route("progress_report.store"),this.form,{preserveScroll:!0,preserveState:!1})},findTeachers:z(function(r){r&&(this.loading.teachers=!0,y.get(route("teachers.find"),{params:{keyword:r}}).then(e=>{this.list.teachers=e.data,this.loading.teachers=!1}))},1e3),getLessons(r){this.loading.lessons=!0,this.options.lessons=[],this.options.activities=[],this.options.outcomes=[],this.search.lesson_id="",this.search.activity_id="",this.search.outcome_id="",y.get(route("progress_report.get_art_digital_lessons",r)).then(e=>{this.options.lessons=e.data,this.loading.lessons=!1})},getActivity(r){this.loading.activities=!0,this.options.activities=[],this.options.outcomes=[],this.search.activity_id="",this.search.outcome_id="",y.get(route("progress_report.get_art_digital_activities",r)).then(e=>{this.options.activities=e.data,this.loading.activities=!1})},getOutcomes(r){this.loading.outcomes=!0,this.options.outcomes=[],this.search.outcome_id="",y.get(route("progress_report.get_art_digital_learning_outcomes",r)).then(e=>{this.options.outcomes=e.data,this.loading.outcomes=!1})},addItem(){this.searching||this.search.theme_id&&this.search.lesson_id&&this.search.activity_id&&this.search.outcome_id&&(this.form.report_data.some(e=>e.outcome_id===this.search.outcome_id)?alert("Item exists!"):(this.searching=!0,y.get(route("progress_report.get_art_digital_objectives",this.search.outcome_id)).then(e=>{var u,$,S,i;const t={theme_id:this.search.theme_id,theme_name:(u=this.$page.props.art_themes.find(m=>m.id===this.search.theme_id))==null?void 0:u.name,lesson_id:this.search.lesson_id,lesson_name:($=this.options.lessons.find(m=>m.id===this.search.lesson_id))==null?void 0:$.name,activity_id:this.search.activity_id,activity_name:(S=this.options.activities.find(m=>m.id===this.search.activity_id))==null?void 0:S.name,outcome_id:this.search.outcome_id,outcome_name:(i=this.options.outcomes.find(m=>m.id===this.search.outcome_id))==null?void 0:i.name,objectives:[],artworks:[]},d=this.form.report_data.length;this.form.report_data.push(t);const n=d,h=this.form.report_data[n];e.data.forEach(m=>{h.objectives.push({id:m.id,name:m.name,achieved:!1})}),this.searching=!1})))},deleteItem(r){this.form.report_data.splice(r,1)},clearSearch(){this.form.teacher_user_id="",this.search.theme_id="",this.search.lesson_id="",this.search.outcome_id="",this.search.activity_id=""},scrollToTop(){const r=this.$refs.progress_report;r&&(r.scrollTop=0)},showGenerateQrModal(r){this.clearQrModal(),this.qr_data.student_id=this.$page.props.student_info.id,this.qr_data.report_detail_id=r,this.qr_data.level=this.$page.props.student_info.level,this.show_qr_modal=!0},generateQr(){this.qr_data.student_id&&this.qr_data.theme_id&&this.qr_data.lesson_id&&this.qr_data.activity_id&&y.post(route("progress_report.generate_qr"),this.qr_data).then(r=>{this.qr_data.image=r.data})},clearQrModal(){this.qr_data.report_detail_id="",this.qr_data.student_id="",this.qr_data.level="",this.qr_data.theme_id="",this.qr_data.lesson_id="",this.qr_data.activity_id="",this.qr_data.image=""},openArtworkInNewTab(r){const e=r.filename?"/storage/art_gallery/"+r.filename:r.blob_url;window.open(e,"_blank")},triggerInput(r){this.$refs["artworkInput_"+r][0].click()},handleFileUpload(r,e){const t=r.target.files;for(let d=0;d<t.length;d++){if(!t[d].type.startsWith("image/")){alert(`${t[d].name} is not an image file.`);return}if(this.form.report_data[e].artworks||(this.form.report_data[e].artworks=[]),this.form.report_data[e].artworks.find(u=>u.file&&u.file.name==t[d].name)){alert(`${t[d].name} already_exists.`);return}const n=new Blob([t[d]],{type:t[d].type}),h=URL.createObjectURL(n);this.form.report_data[e].artworks.push({file:t[d],blob_url:h,for_artbook:!1})}},deleteFile(r,e){this.form.report_data[r].artworks[e].filename&&this.form.file_to_delete.push(this.form.report_data[r].artworks[e].filename),this.form.report_data[r].artworks.splice(e,1)},async generateComment(){if(this.generating.comments)return;this.generating.comments=!0,this.open_prompt=!1,this.form.comments="";const r=await fetch("/api/ai/comment-generator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_prompt:`
                Report Content:
                ${JSON.stringify(this.form.report_data)}

                User Additional Information:
                ${this.additional_inputs}`})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const e=r.body.getReader(),t=new TextDecoder;for(;;){const{done:d,value:n}=await e.read();if(d)break;this.form.comments+=t.decode(n,{stream:!0})}this.additional_inputs="",this.generating.comments=!1},async improveWriting(){if(!this.improving_comment){if(this.improving_comment=!0,this.selected_text){const r=JSON.parse(JSON.stringify(this.selected_text)),e=await fetch("/api/ai/comment-improve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_prompt:`
                Report Content:
                ${JSON.stringify(this.form.report_data)}

                Actual Comment:
                ${this.form.comments}

                Selected phrase:
                ${this.selected_text}`})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=e.body.getReader(),d=new TextDecoder;let n="";for(;;){const{done:h,value:u}=await t.read();if(h)break;n+=d.decode(u,{stream:!0})}this.form.comments=this.form.comments.replaceAll(r,n)}this.improving_comment=!1}},handleSelection(){const r=window.getSelection();r.rangeCount>0&&r.toString().trim().length>0?this.selected_text=r.toString():this.selected_text=""},clearSelection(r){r&&r.relatedTarget&&r.relatedTarget.matches(".improve-btn")||(window.getSelection().removeAllRanges(),this.selected_text="")}}},Ut=Object.assign(Ie,{__name:"ArtDigital",setup(r){return(e,t)=>{const d=k("Button"),n=k("Label"),h=k("Datepicker"),u=k("ComboBox"),$=k("Checkbox"),S=k("Textarea");return _(),c(b,null,[s(p(N),{title:"Progress Report"}),s(B,null,{header:o(()=>t[24]||(t[24]=[])),default:o(()=>[s(M),s(Q,null,{title:o(()=>t[25]||(t[25]=[a("Progress Reports")])),content:o(()=>[s(p(W),null,{default:o(()=>[s(p(F),{class:"bg-gray-100"},{default:o(()=>[s(p(U),null,{default:o(()=>[s(p(C),null,{default:o(()=>t[26]||(t[26]=[a("#")])),_:1,__:[26]}),s(p(C),null,{default:o(()=>t[27]||(t[27]=[a("Date")])),_:1,__:[27]}),s(p(C),null,{default:o(()=>t[28]||(t[28]=[a("Teacher's Name")])),_:1,__:[28]}),s(p(C),{class:"text-center"},{default:o(()=>t[29]||(t[29]=[a("Status")])),_:1,__:[29]}),s(p(C),{class:"text-center"},{default:o(()=>t[30]||(t[30]=[a("Action")])),_:1,__:[30]})]),_:1})]),_:1}),s(p(G),null,{default:o(()=>[e.$page.props.progress_reports.length?j("",!0):(_(),V(p(U),{key:0},{default:o(()=>[s(p(w),{class:"text-center",colspan:"10"},{default:o(()=>t[31]||(t[31]=[l("div",{class:"p-3"},"No Record Found",-1)])),_:1,__:[31]})]),_:1})),(_(!0),c(b,null,q(e.$page.props.progress_reports,(i,m)=>(_(),V(p(U),null,{default:o(()=>[s(p(w),null,{default:o(()=>[a(v(m+1),1)]),_:2},1024),s(p(w),null,{default:o(()=>[a(v(p(E)(i.date).format("DD/MM/Y")),1)]),_:2},1024),s(p(w),null,{default:o(()=>[a(v(i.display_name),1)]),_:2},1024),s(p(w),{class:"text-center"},{default:o(()=>[l("span",{class:T(["inline-flex items-center justify-center px-2 py-1 text-xs rounded",[{"bg-green-200 text-green-600":i.attendance_status==1},{"bg-red-200 text-red-600":i.attendance_status==2},{"bg-gray-200 text-gray-600":i.attendance_status==3},{"bg-blue-200 text-blue-600":i.attendance_status==4}]])},v(i.attendance_status_name),3)]),_:2},1024),s(p(w),{class:"text-center space-x-2"},{default:o(()=>[s(d,{variant:"outline",onClick:f=>e.viewProgressReport(m)},{default:o(()=>t[32]||(t[32]=[a("Edit")])),_:2,__:[32]},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),s(J,{report_details:e.$page.props.report_details},null,8,["report_details"]),s(I,{open:e.show_progress_report,"onUpdate:open":t[16]||(t[16]=i=>e.show_progress_report=i)},{title:o(()=>t[33]||(t[33]=[a("Edit Progress Report")])),content:o(()=>[l("div",te,[l("div",se,[s(n,{id:"date"},{default:o(()=>t[34]||(t[34]=[a("Date"),l("span",{class:"text-red-500"},"*",-1)])),_:1,__:[34]}),s(h,{modelValue:e.form.date,"onUpdate:modelValue":t[0]||(t[0]=i=>e.form.date=i),mode:"date",format:"dd/MM/Y",error:!e.form.date,teleport:"#date",teleportCenter:!0},null,8,["modelValue","error"])]),l("div",oe,[s(n,null,{default:o(()=>t[35]||(t[35]=[a("Teacher's Name"),l("span",{class:"text-red-500"},"*",-1)])),_:1,__:[35]}),s(u,{items:e.list.teachers,"label-property":"display_name","value-property":"ID",error:e.form.attendance_status==1&&!e.form.teacher_user_id,modelValue:e.form.teacher_user_id,"onUpdate:modelValue":t[1]||(t[1]=i=>e.form.teacher_user_id=i),"select-placeholder":e.form.teacher_name,"search-placeholder":"Search teacher...",onSearch:e.findTeachers,loading:e.loading.teachers},null,8,["items","error","modelValue","select-placeholder","onSearch","loading"])]),l("div",re,[s(n,null,{default:o(()=>t[36]||(t[36]=[a("Theme")])),_:1,__:[36]}),s(u,{items:e.$page.props.art_themes,"label-property":"name","value-property":"id",modelValue:e.search.theme_id,"onUpdate:modelValue":t[2]||(t[2]=i=>e.search.theme_id=i),"select-placeholder":"Select Theme","search-placeholder":"Search theme...",onSelect:t[3]||(t[3]=i=>e.getLessons(e.search.theme_id))},null,8,["items","modelValue"])]),l("div",ie,[s(n,null,{default:o(()=>t[37]||(t[37]=[a("Lesson")])),_:1,__:[37]}),s(u,{items:e.options.lessons,"label-property":"name","value-property":"id",modelValue:e.search.lesson_id,"onUpdate:modelValue":t[4]||(t[4]=i=>e.search.lesson_id=i),"select-placeholder":"Select Lesson","search-placeholder":"Search lesson...",onSelect:t[5]||(t[5]=i=>e.getActivity(e.search.lesson_id)),loading:e.loading.lessons},null,8,["items","modelValue","loading"])]),l("div",ae,[s(n,null,{default:o(()=>t[38]||(t[38]=[a("Activity")])),_:1,__:[38]}),s(u,{items:e.options.activities,"label-property":"name","value-property":"id",modelValue:e.search.activity_id,"onUpdate:modelValue":t[6]||(t[6]=i=>e.search.activity_id=i),"select-placeholder":"Select Activity","search-placeholder":"Search activity...",onSelect:t[7]||(t[7]=i=>e.getOutcomes(e.search.activity_id)),loading:e.loading.activities},null,8,["items","modelValue","loading"])]),l("div",le,[s(n,null,{default:o(()=>t[39]||(t[39]=[a("Learning Outcome")])),_:1,__:[39]}),s(u,{items:e.options.outcomes,"label-property":"name","value-property":"id",modelValue:e.search.outcome_id,"onUpdate:modelValue":t[8]||(t[8]=i=>e.search.outcome_id=i),"select-placeholder":"Select Outcome","search-placeholder":"Search outcome...",onSelect:t[9]||(t[9]=i=>e.addItem()),loading:e.loading.outcomes},null,8,["items","modelValue","loading"])]),l("div",null,[s(n,null,{default:o(()=>t[40]||(t[40]=[a("Objectives")])),_:1,__:[40]}),e.form.report_data.length?(_(!0),c(b,{key:1},q(e.form.report_data,(i,m)=>(_(),V(H,{class:"bg-white",modelValue:e.open_objectives[m],"onUpdate:modelValue":f=>e.open_objectives[m]=f},{trigger:o(()=>[l("div",de,[s(n,null,{default:o(()=>[a(v(i.theme_name)+" : "+v(i.lesson_name),1)]),_:2},1024),s(n,{class:"text-red-600 cursor-pointer",onClick:f=>e.deleteItem(m)},{default:o(()=>t[42]||(t[42]=[a("Delete")])),_:2,__:[42]},1032,["onClick"])])]),content:o(()=>[l("div",me,[l("div",pe,[s(p(L),null,{default:o(()=>[l("span",null,v(i.activity_name),1)]),_:2},1024),s(p(L),{variant:"outline"},{default:o(()=>[l("span",null,v(i.outcome_name),1)]),_:2},1024)]),l("ul",ue,[(_(!0),c(b,null,q(i.objectives,(f,g)=>(_(),c("li",_e,[s(n,{class:"flex items-center space-x-2 py-2"},{default:o(()=>[s($,{value:f.id,checked:e.form.report_data[m].objectives[g].achieved,onClick:A=>e.form.report_data[m].objectives[g].achieved=!e.form.report_data[m].objectives[g].achieved},null,8,["value","checked","onClick"]),l("span",fe,v(f.name),1)]),_:2},1024)]))),256))]),l("div",he,[l("div",ce,[l("div",{onClickPassive:f=>e.triggerInput(m),class:"border border-slate-300 rounded h-20 w-20 flex justify-center items-center hover:bg-gray-50 cursor-pointer"},[s(p(Z),{class:"text-slate-400"}),l("input",{type:"file",ref_for:!0,ref:"artworkInput_"+m,class:"hidden",accept:"image/*",multiple:"",onChange:f=>e.handleFileUpload(f,m)},null,40,ve)],40,ge),s(n,{class:"cursor-pointer text-xs"},{default:o(()=>t[43]||(t[43]=[a("Add Artwork")])),_:1,__:[43]})]),i.artworks?(_(!0),c(b,{key:0},q(i.artworks,(f,g)=>(_(),c("div",ye,[s(p(x),{class:"absolute -top-2 -right-2 h-5 w-5 cursor-pointer text-red-500",onClick:A=>e.deleteFile(m,g)},null,8,["onClick"]),l("img",{class:"border border-slate-300 h-20 w-20 rounded cursor-pointer",src:f.filename?"/storage/art_gallery/"+f.filename:f.blob_url,alt:f.filename,onClick:A=>e.openArtworkInNewTab(f)},null,8,be),l("div",ke,[s($,{id:m+"_"+g,checked:!!e.form.report_data[m].artworks[g].for_artbook,onClick:A=>e.form.report_data[m].artworks[g].for_artbook=!e.form.report_data[m].artworks[g].for_artbook},null,8,["id","checked","onClick"]),s(n,{for:m+"_"+g,class:"cursor-pointer text-xs"},{default:o(()=>t[44]||(t[44]=[a("Art Book")])),_:2,__:[44]},1032,["for"])])]))),256)):j("",!0)])])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),256)):(_(),c("div",ne,[s(n,null,{default:o(()=>t[41]||(t[41]=[a("No objectives found.")])),_:1,__:[41]})])),!e.form.report_data.length&&e.form.attendance_status==1?(_(),V(n,{key:2,class:"text-xs text-red-500 font-semibold"},{default:o(()=>t[45]||(t[45]=[a("At least one (1) objective is required.")])),_:1,__:[45]})):j("",!0)]),l("div",we,[l("div",$e,[s(n,null,{default:o(()=>t[46]||(t[46]=[a("Comments")])),_:1,__:[46]}),s(p(K),{open:e.open_prompt,"onUpdate:open":t[12]||(t[12]=i=>e.open_prompt=i)},{default:o(()=>[s(p(Y),null,{default:o(()=>[s(d,{size:"xs",variant:"outline",class:"border-0 bg-gradient-to-r from-purple-300 to-indigo-300 hover:bg-gradient-to-r hover:from-indigo-300 hover:to-purple-300"},{default:o(()=>[l("div",Se,[s(p(ee),{class:T(["w-3.5 h-3.5 mr-1 mt-0.5",{"animate-pulse":e.generating.comments}])},null,8,["class"]),e.generating.comments?(_(),c("span",{key:1,class:T(["text-xs",{"animate-pulse":e.generating.comments}])},"Generating...",2)):(_(),c("span",Ce,"Generate with AI"))])]),_:1})]),_:1}),s(p(X),{align:"start",side:"left",class:"w-96 bg-gradient-to-r from-purple-200 to-indigo-200 bg-opacity-70 p-2"},{default:o(()=>[l("div",Ve,[s(S,{class:"bg-white placeholder:text-sm placeholder:text-zinc-400",rows:"4",type:"text",placeholder:`What would you like to add? 

Example: Teaching methods, activities, issues, in Malay/English and etc...`,modelValue:e.additional_inputs,"onUpdate:modelValue":t[10]||(t[10]=i=>e.additional_inputs=i)},null,8,["modelValue"]),s(d,{size:"xs",class:"",variant:"",onClick:t[11]||(t[11]=i=>e.additional_inputs?e.generateComment():"")},{default:o(()=>t[47]||(t[47]=[a("Prompt It")])),_:1,__:[47]})])]),_:1})]),_:1},8,["open"])]),l("div",qe,[s(S,{class:"mb-2",rows:"10",modelValue:e.form.comments,"onUpdate:modelValue":t[13]||(t[13]=i=>e.form.comments=i),modelModifiers:{lazy:!0},contenteditable:"true",onMouseup:e.handleSelection,onMousedown:e.clearSelection,onBlur:e.clearSelection,onKeyup:e.handleSelection},null,8,["modelValue","onMouseup","onMousedown","onBlur","onKeyup"]),s(O,{name:"fade-slide"},{default:o(()=>[P(s(d,{onBlur:e.clearSelection,onClick:e.improveWriting,size:"xs",variant:"outline",class:"improve-btn bg-gradient-to-r from-purple-200 to-blue-200 font-medium absolute text-xs bottom-3 left-1/2 transform -translate-x-1/2"},{default:o(()=>[a(v(e.improving_comment?"Generating...":"Improve Writing"),1)]),_:1},8,["onBlur","onClick"]),[[R,e.selected_text]])]),_:1})])]),l("div",Te,[s(n,null,{default:o(()=>t[48]||(t[48]=[a("Status")])),_:1,__:[48]}),s(u,{items:e.$page.props.attendance_status,"label-property":"name","value-property":"id",error:e.form.attendance_status==3,modelValue:e.form.attendance_status,"onUpdate:modelValue":t[14]||(t[14]=i=>e.form.attendance_status=i),"select-placeholder":"Select Status","search-placeholder":"Search status..."},null,8,["items","error","modelValue"])])])]),footer:o(()=>[s(d,{variant:"outline",onClick:t[15]||(t[15]=i=>e.show_progress_report=!1)},{default:o(()=>t[49]||(t[49]=[a("Cancel")])),_:1,__:[49]}),s(d,{onClick:e.updateProgressReport},{default:o(()=>t[50]||(t[50]=[a("Save")])),_:1,__:[50]},8,["onClick"])]),_:1},8,["open"]),s(I,{open:e.show_qr_modal,"onUpdate:open":t[23]||(t[23]=i=>e.show_qr_modal=i),classProp:"max-w-sm"},{title:o(()=>t[51]||(t[51]=[a("Generate QR for upload")])),content:o(()=>[l("div",Ae,[e.qr_data.image?(_(),c("div",je,[l("div",{class:"h-40 w-40",innerHTML:e.qr_data.image},null,8,Ue)])):(_(),c(b,{key:0},[l("div",null,[s(n,null,{default:o(()=>t[52]||(t[52]=[a("Theme")])),_:1,__:[52]}),s(u,{items:e.$page.props.art_themes,"label-property":"name","value-property":"id",error:!e.qr_data.theme_id,modelValue:e.qr_data.theme_id,"onUpdate:modelValue":t[17]||(t[17]=i=>e.qr_data.theme_id=i),"select-placeholder":"Select Theme","search-placeholder":"Search theme...",onSelect:t[18]||(t[18]=i=>e.getLessons(e.qr_data.theme_id))},null,8,["items","error","modelValue"])]),l("div",null,[s(n,null,{default:o(()=>t[53]||(t[53]=[a("Lesson")])),_:1,__:[53]}),s(u,{items:e.options.lessons,"label-property":"name","value-property":"id",error:!e.qr_data.lesson_id,modelValue:e.qr_data.lesson_id,"onUpdate:modelValue":t[19]||(t[19]=i=>e.qr_data.lesson_id=i),"select-placeholder":"Select Lesson","search-placeholder":"Search lesson...",onSelect:t[20]||(t[20]=i=>e.getActivity(e.qr_data.lesson_id)),loading:e.loading.lessons},null,8,["items","error","modelValue","loading"])]),l("div",null,[s(n,null,{default:o(()=>t[54]||(t[54]=[a("Activity")])),_:1,__:[54]}),s(u,{items:e.options.activities,"label-property":"name","value-property":"id",error:!e.qr_data.activity_id,modelValue:e.qr_data.activity_id,"onUpdate:modelValue":t[21]||(t[21]=i=>e.qr_data.activity_id=i),"select-placeholder":"Select Activity","search-placeholder":"Search activity...",loading:e.loading.activities},null,8,["items","error","modelValue","loading"])]),s(d,{onClick:e.generateQr,class:T(e.qr_data.student_id&&e.qr_data.theme_id&&e.qr_data.lesson_id&&e.qr_data.activity_id?"":"cursor-not-allowed opacity-30")},{default:o(()=>t[55]||(t[55]=[a("Generate QR")])),_:1,__:[55]},8,["onClick","class"])],64))])]),footer:o(()=>[s(d,{variant:"outline",onClick:t[22]||(t[22]=i=>e.show_qr_modal=!1)},{default:o(()=>t[56]||(t[56]=[a("Close")])),_:1,__:[56]})]),_:1},8,["open"])]),_:1})],64)}}});export{Ut as default};
