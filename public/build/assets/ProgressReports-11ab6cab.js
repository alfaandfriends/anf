import{_ as b}from"./Authenticated-ccbb87bd.js";import{H as w}from"./@inertiajs-72b4b122.js";import{B as y}from"./Button-4c1c832d.js";import{s as c}from"./simplebar-vue-1b5fe0cf.js";import{h as $}from"./moment-a9aaa855.js";import{a as _}from"./axios-3a665b0f.js";import k from"./Header-08d90ec7.js";import{y as o,x as n,u as g,Q as m,F as h,t as a,W as v,K as u,z as t,q as d,C as l,J as x}from"./@vue-3ecac556.js";import"./@heroicons-348181b9.js";import"./app-6cbce3f4.js";import"./pusher-js-b1694987.js";import"./@vueform-8c23d62f.js";import"./cropperjs-274ed722.js";import"./laravel-vite-plugin-d10ca5e8.js";import"./vue-debounce-ed417ae1.js";import"./v-calendar-4075303e.js";import"./radix-vue-0dbe0706.js";import"./@floating-ui-24f01f9d.js";import"./@internationalized-2f03b566.js";import"./clsx-0839fdbe.js";import"./tailwind-merge-05141ada.js";import"./@vueuse-25519c21.js";import"./class-variance-authority-ff2c9236.js";import"./@radix-icons-3edfb593.js";import"./@vuepic-e1682e24.js";import"./@babel-1b80a44a.js";import"./lodash.isequal-1ba6c16d.js";import"./vue-7c584690.js";import"./lodash.clonedeep-8ef52793.js";import"./qs-dba4bf9b.js";import"./side-channel-218a49f6.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-b36cc063.js";import"./deepmerge-89e33937.js";import"./nprogress-34327965.js";import"./@headlessui-5e870782.js";import"./simplebar-core-89d52a58.js";import"./lodash-es-f4fee5ac.js";const C={class:"max-w-xl mx-auto border shadow bg-white rounded-lg px-4 mt-14"},R={class:"flex justify-evenly sm:justify-center space-x-8 md:space-x-10 pt-3 pb-4 font-medium"},P={class:"max-w-xl mx-auto mt-10"},B={key:0,class:"flex items-center space-y-3"},H={key:1,class:"flex justify-center mx-1 mt-10"},S={key:2,class:"mt-3"},j={class:"bg-white shadow rounded-lg border"},N={class:"divide-y divide-slate-200 dark:divide-zink-500 px-6 py-4"},V={class:"flex items-center gap-3 py-2 first:pt-0 last:pb-0"},z={class:"grow"},F={class:"font-medium"},M={class:"shrink-0"},T={key:0,class:"flex items-center justify-between pt-5 animate-pulse"},E={components:{simplebar:c},data(){return{generate:{id:"",running:!1},loading:{progress_reports:!1}}},methods:{showProgressReport(i,e){this.generate.running||(this.generate.running=!0,_.get(route("progress_report.full_reports"),{responseType:"blob",params:{progress_report_id:i,student_fee:e}}).then(r=>{const s=new Blob([r.data],{type:"application/pdf"}),p=URL.createObjectURL(s);window.open(p,"_blank"),this.generate.running=!1}).catch(r=>{console.error("Error fetching PDF:",r),this.generate.running=!1}))},handlePRScroll(){const i=this.$refs.progress_report_container.$el.querySelector(".simplebar-content-wrapper"),e=i.scrollTop,r=i.scrollHeight,s=i.clientHeight;e+s>=r-100&&this.$page.props.progress_reports.next_page_url&&(this.loading.progress_reports||(this.loading.progress_reports=!0,_.get(route("parent.student_progress_reports"),{params:{page:this.$page.props.progress_reports.current_page+1}}).then(p=>{p.data.data.forEach(f=>{this.$page.props.progress_reports.data.push(f)}),this.$page.props.progress_reports.current_page=p.data.current_page,this.$page.props.progress_reports.next_page_url=p.data.next_page_url,this.loading.progress_reports=!1})))}}},ze=Object.assign(E,{__name:"ProgressReports",setup(i){return(e,r)=>(a(),o(h,null,[n(g(w),{title:"Progress Reports"}),n(k,null,{default:m(()=>[v(u(e.$page.props.session_data.current_active_programme.name),1)]),_:1}),n(b,null,{default:m(()=>[t("div",C,[n(g(c),{"data-simplebar-auto-hide":"true"},{default:m(()=>[t("div",R,[t("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.stories")?"font-extrabold":""]),onClick:r[0]||(r[0]=s=>e.$inertia.get(e.route("parent.stories",e.$page.props.session_data.current_active_programme.encrypted_id)))},r[5]||(r[5]=[t("img",{src:"/images/parents/stories.png",class:"w-10 h-10",alt:""},null,-1),t("span",{class:"text-sm"},"Stories",-1)]),2),t("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.progress_reports")?"font-extrabold":""]),onClick:r[1]||(r[1]=s=>e.$inertia.get(e.route("parent.progress_reports")))},r[6]||(r[6]=[t("img",{src:"/images/parents/progress_report.png",class:"w-10 h-10",alt:""},null,-1),t("span",{class:"text-sm"},"Progress Reports",-1)]),2),t("div",{class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.invoices")?"font-extrabold":""]),onClick:r[2]||(r[2]=s=>e.$inertia.get(e.route("parent.invoices")))},r[7]||(r[7]=[t("img",{src:"/images/parents/fee_invoice.png",class:"w-10 h-10",alt:""},null,-1),t("span",{class:"text-sm"},"Invoices",-1)]),2),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(a(),o("div",{key:0,class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_gallery")?"font-extrabold":""]),onClick:r[3]||(r[3]=s=>e.$inertia.get(e.route("parent.art_gallery")))},r[8]||(r[8]=[t("img",{src:"/images/parents/art_gallery.png",class:"w-10 h-10",alt:""},null,-1),t("span",{class:"text-sm"},"Art Gallery",-1)]),2)):l("",!0),e.$page.props.session_data.current_active_programme.id==3||e.$page.props.session_data.current_active_programme.id==5?(a(),o("div",{key:1,class:d(["flex flex-col items-center cursor-pointer hover:scale-105 duration-150 whitespace-nowrap",e.route().current("parent.art_book")?"font-extrabold":""]),onClick:r[4]||(r[4]=s=>e.$inertia.get(e.route("parent.art_book")))},r[9]||(r[9]=[t("img",{src:"/images/parents/art_book.png",class:"w-10 h-10",alt:""},null,-1),t("span",{class:"text-sm"},"Art Book",-1)]),2)):l("",!0)])]),_:1})]),t("div",P,[e.$page.props.progress_reports.data.length?(a(),o("div",B,r[10]||(r[10]=[t("h2",{class:"text-lg md:text-xl mx-1 font-extrabold"},"Progress Reports",-1)]))):l("",!0),e.$page.props.progress_reports.data.length?l("",!0):(a(),o("div",H,r[11]||(r[11]=[t("span",{class:"text-slate-500"},"No Progress Reports Found",-1)]))),e.$page.props.progress_reports.data.length?(a(),o("div",S,[t("div",j,[n(g(c),{"data-simplebar-auto-hide":"true",class:"max-h-96",onScroll:e.handlePRScroll,ref:"progress_report_container"},{default:m(()=>[t("ul",N,[(a(!0),o(h,null,x(e.$page.props.progress_reports.data,(s,p)=>(a(),o("li",V,[t("div",z,[t("h6",F,u(g($)(s.month).format("MMMM Y")),1)]),t("div",M,[n(y,{class:"py-1 px-4",onClick:f=>e.showProgressReport(s.id,s.student_fee_id)},{default:m(()=>[v(u(e.generate.id==s.id&&e.generate.running?"Generating...":"View"),1)]),_:2},1032,["onClick"])])]))),256)),e.loading.progress_reports?(a(),o("div",T,r[12]||(r[12]=[t("div",null,[t("div",{class:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-600 w-32 mb-2.5"})],-1),t("div",{class:"h-2.5 bg-gray-300 rounded-full dark:bg-gray-700 w-16"},null,-1)]))):l("",!0)])]),_:1},8,["onScroll"])])])):l("",!0)])]),_:1})],64))}});export{ze as default};
